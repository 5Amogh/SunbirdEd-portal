<script src="/js/jquery.blockUI-min.js"></script>

<div id="primaryDiv" class="mediaFrame content_row" ng-cloak>
    <!--<div class="gadgetDiv rotateNote">
        <a href="javascript: void(0)" ng-click="showNotesPopup()"><i class="glyphicon glyphicon-plus-sign"></i> <span>Notes</span></a>
    </div>  -->
    <div class="action-icon-div-ct">
        <div class="content">
            <div id="sliderContentDiv"></div>
        </div>
    </div>
    <div ng-show="showInterception" style="float:left; width: 100%">
        <a href="javascript: void(0)" ng-click="closeInterception()" class="btn btn-large btn-primary pull-right" style="margin-right: 10px; margin-top: 10px" data-action="Back" il-capture-click>Return to "{{response.element.name}}"</a>
    </div>
    <div id="primaryContentDiv" ng-show="showVideo"></div>
    <div id="slideshareContentDiv" class="videoFrame" ng-show="showSlideshare" style="float:left; width: 100%; display:block"></div>
    <div id="PDFDocDiv" style="height:600px;" ng-show="showDocument">
    </div>
    <div id="ecmlContentDiv" ng-show="showecml">
        <iframe id="ecmlContentIFrame" width="100%" height="100px" style="border: none; overflow: hidden;" scrolling="no"></iframe>
    </div>
    <div id="ideContentDiv" class="" ng-show="showIde" style="float:left; width: 100%; display:block; text-align:center;">
        <button class='btn btn-large btn-primary' style='margin-bottom:10px; margin-top:10px;' ng-click='getProgrammingURL(response.element.media.mediaUrl, response.element)'>Open IDE</button>
    </div>
    <div id="scribdDocDiv" ng-show="showSlides || showDocument" style="width:100%;" il-scribd-events data-player="scribdPlayerObj" data-status="scribdPlayerStatus">
    </div>
    <div ng-show="showImage">
        <img ng-src="{{response.element.media.mediaUrl}}" style="height: 100%; max-height: 800px;" />
    </div>
    <div id="packageMediaDiv" ng-show="showPackage">
        <iframe id="mediaPackageIFrame" width="100%" height="50px" style="border: none; overflow-y: auto; overflow-x: auto;"></iframe>
    </div>
    <div ng-include="'mcq_template.html'" ng-if="showMCQ || showTest"></div>
    <div id="textContentDiv" ng-show="showText" style="max-height: 800px;" class="common_content"></div>
    <div id="richTextContentDiv" ng-show="showRichText" class="common_content" ng-bind-html="renderHtml(richText)"></div>
    <div ng-show="showUrl">
        <!-- <iframe name="url_frame" id="url_frame" src="about:blank" frameborder="0" scrolling="yes" height="400px" width="100%"></iframe> -->
        <div id="url_frame" style="width:100%;" class="common_content marginTop5 padLeft" il-external-url-events data-status="loadStatus">
            <div class="common_content">Loading...
                <img src="/img/loading.gif">
            </div>
        </div>
    </div>
    <div ng-show="showExternal">
        <div style="width:100%;" class="common_content marginTop5 padLeft">
            View <a href="{{response.element.media.mediaUrl}}" target="_blank">{{response.element.media.title}}</a>
        </div>
    </div>
    <div ng-show="showUnSupported">
        <h4>Unsupported Format</h4>
    </div>
    <div id="interceptionDiv" style="position: absolute; z-index:999; background: #555; color: #fff; opacity: 0.9; display: none;">
        <div class="interception_content" style="padding-top: 50px; margin-left: 10%; margin-right: 10%">
            <p>
                Hi! Your lecture is paused so that you can attempt a quick exercise. Click Continue to proceed or Back to return to the lecture.
            </p>
        </div>
        <div style="padding-right: 10%; width: 100%;">
            <a href="javascript: void(0)" ng-click="backToLecture()" class="btn btn-large btn-default pull-right marginRight5" data-action="Skip" il-capture-click>Back</a>
            <a href="javascript: void(0)" ng-click="playInterception()" class="btn btn-large btn-primary signUp pull-right" style="margin-right: 10px" data-action="Start" il-capture-click>Continue</a>
        </div>
    </div>
    <div ng-show="showInterception">
        <div id="int_video_div" ng-if="interception.mediaType == 'video'">
        </div>
        <div id="intSlideshareDiv" ng-if="interception.mediaType == 'slideshare'" style="width:100%;"></div>
        <div id="intScribdDocDiv" ng-if="interception.mediaType == 'slides' || interception.mediaType == 'document'" style="width:100%;" class="pull-left padLeft"></div>
        <div ng-if="interception.mediaType == 'image'" style="width:100%;" class="pull-left padLeft">
            <img ng-src="{{interception.mediaUrl}}" style="height: 100%; max-height: 800px;" />
        </div>
        <div id="interceptionTextDiv" ng-if="interception.mediaType == 'text'" style="width:100%;" class="pull-left padLeft">
        </div>
        <div ng-if="interception.contentType == 'learningactivity'">
            <div ng-if="interception.contentSubType == 'quiz'">
                <div ng-include="'mcq_template.html'" ng-if="interception.mediaType == 'mcq'" style="width:100%;" class="pull-left padLeft"></div>
                <div ng-include="'test_template.html'" ng-if="interception.mediaType == 'test'" style="width:100%;" class="pull-left padLeft"></div>
            </div>
        </div>
        <div ng-if="interception.contentType == 'unsupported'" style="width:100%;" class="pull-left">
            <h4>Unsupported Format</h4>
        </div>
        <!-- <div style="width:100%;">
			<a href="javascript: void(0)" ng-click="closeInterception()" class="btn btn-large btn-primary pull-right" style="margin-right: 10px; margin-top: 10px">Return to "{{response.element.name}}"</a>
		</div> -->
    </div>
    <div class="col-md-12" ng-if="showEvent" ng-switch on="response.element.media.state">
        <div ng-if="response.element.media.state == 'notstarted'">
            <div class="event-block">
                <div class="event-block-heading" ng-if="response.element.media.objectType == 'coachingSession'">
                    Coaching Session not started
                </div>
                <div class="event-block-heading" ng-if="response.element.media.objectType == 'Exam' || response.element.media.objectType == 'practiceTest'">
                    Exam not yet started
                </div>
                <p class="common_content" ng-show="response.element.media.startDate">Start Date : <span>{{ response.element.media.startDate | date:"MM/dd/yyyy 'at' h:mma"}}</span></p>
                <p class="common_content" ng-show="response.element.media.instructor.name && response.element.media.objectType == 'coachingSession'">Session By : {{response.element.media.instructor.name}}</p>
                <div ng-if="!response.element.media.isMandatory">
                    <div ng-show="response.element.media.action == 'accepted' || response.element.media.action == 'declined'" class="alert alert-info" style="padding: 6px !important">
                        You have <b>{{response.element.media.action}}</b> this event on {{ response.element.media.lastUpdated | date:"MM/dd/yyyy 'at' h:mma"}}.
                    </div>
                    <div ng-show="response.element.media.action != 'accepted' && response.element.media.action != 'declined'" style="padding: 6px !important">
                        <div class="alert alert-info" style="padding: 6px !important">
                            You are <b>{{response.element.media.action}}</b> to this event on {{ response.element.media.lastUpdated | date:"MM/dd/yyyy 'at' h:mma"}}.
                        </div>
                        <span class="fa-stack fa-lg tool-tip" style="color: #5cb85c; cursor: pointer" ng-click="setEventStatus(true)" data-toggle="tooltip" data-placement="bottom" title="Accept this event">
                            <i class="fa fa-circle-thin fa-stack-2x"></i>
                            <i class="fa fa-check fa-stack-1x"></i>
                        </span>
                        <span class="fa-stack fa-lg tool-tip" style="color: #d9534f; cursor: pointer" ng-click="setEventStatus(false)" data-toggle="tooltip" data-placement="bottom" title="Decline this event">
                            <i class="fa fa-circle-thin fa-stack-2x"></i>
                            <i class="fa fa-remove fa-stack-1x"></i>
                        </span>
                    </div>
                </div>
                <div ng-if="response.element.media.isMandatory">
                    <span class="label label-info community-event-status"><i class="fa fa-info-circle"></i> This event is mandatory</span>
                </div>
            </div>
        </div>
        <div class="container" ng-if="response.element.media.state != 'notstarted' && response.element.media.action == 'declined'">
            <div class="alert alert-info" style="padding: 6px !important">
                You have <b>{{response.element.media.action}}</b> this event on {{ response.element.media.lastUpdated | date:"MM/dd/yyyy 'at' h:mma"}}.
            </div>
        </div>

        <div class="container" ng-if="response.element.media.state == 'inprogress' && response.element.media.action != 'declined'">
            <div class="event-block">
                <div class="event-block-heading" ng-if="response.element.media.objectType == 'coachingSession'">
                    Coaching Session is in progress
                </div>
                <p class="common_content" ng-show="response.element.media.startDate">Start Date : <span>{{ response.element.media.startDate | date:"MM/dd/yyyy 'at' h:mma"}}</span></p>
                <p class="common_content" ng-show="response.element.media.instructor.name && response.element.media.objectType == 'coachingSession'">Session By : {{response.element.media.instructor.name}}</p>
                <a class="btn btn-primary event-block-btn" href="{{response.element.media.mediaUrl}}" ng-if="response.element.media.objectType == 'coachingSession'" ng-click="setElementComplete()" target="_blank" data-action="Join:CoachingSession" data-object-id="{{response.element.identifier}}" data-environment="Coaching" il-capture-click>Join Meeting</a> 
            </div>
            <div ng-include="'mcq_template.html'" ng-if="response.element.media.objectType == 'Exam' || response.element.media.objectType == 'practiceTest'"></div>
        </div>
        <div class="container" ng-if="response.element.media.state == 'complete' && response.element.media.action != 'declined'">
            <div class="event-block">
                <div class="event-block-heading" ng-if="response.element.media.objectType == 'coachingSession'">
                    Coaching Session is completed
                </div>
                <div class="event-block-heading" ng-if="response.element.media.objectType == 'Exam' || response.element.media.objectType == 'practiceTest'">
                    Exam is completed
                </div>
               <p class="common_content" ng-show="response.element.media.endDate">Completed On : <span>{{ response.element.media.endDate | date:"dd/MM/yyyy ',' h:mma"}}</span></p>
               <p class="common_content" ng-show="response.element.media.instructor.name && response.element.media.objectType == 'coachingSession'">Session By : {{response.element.media.instructor.name}}</p>
            </div>
            <div ng-include="'mcq_template.html'" ng-if="response.element.media.objectType == 'Exam' || response.element.media.objectType == 'practiceTest'"></div>
        </div>
    </div>
</div>
<!-- <div class="mediaFrame content_row" ng-if="response.element.contentSubType == 'program' || interception.contentSubType == 'program' || response.element.contentSubType == 'exercise' || interception.contentSubType == 'exercise'">
    <div id="programDiv" ng-include="'program_template.html'" ng-show="response.element.contentSubType == 'program' || interception.contentSubType == 'program'" style="margin-top: 25px;"></div>
    <div style="margin-top: 25px;" ng-show="response.element.contentSubType == 'exercise' || interception.contentSubType == 'exercise'">
        <input id="uploadExerciseSolution" type="file" title="Upload Solution" class="btn btn-primary disabled" style="display:none">
        	<span id="exerciseDemoNoteId" style="display:none"><b class="padLeft">Note:</b> Exercise functionality is not yet enabled.</span>
    	</input>
        
    </div>
</div> -->

<!-- MCQ template for showing MCQ in video interception points -->
<script type="text/ng-template" id="mcq_template.html">
 
<div ng-include="'/quiz/assessment-player.html'" class="quizTemplateParent"></div>

 </script>

<script type="text/ng-template" id="test_template.html">
 
<div ng-include="'/quiz/assessment-player.html'" class="quizTemplateParent"></div>

 </script>

<script type="text/javascript">
function showProgramFullScreen() {
    $('#aceProgramEditor').height('+=400');
    $('#primaryDiv').hide();
    $('#showProgramBtn').hide();
    $('#hideProgramBtn').show();
    $('#programDiv').css({
        'margin-top': '0px'
    });
}

function hideProgramFullScreen() {
    $('#aceProgramEditor').height('-=400');
    $('#primaryDiv').show();
    $('#showProgramBtn').show();
    $('#hideProgramBtn').hide();
    $('#programDiv').css({
        'margin-top': '25px'
    });
}
</script>

<script type="text/ng-template" id="program_template.html">
    <div class="padBottom">
        <h4>Program:
            <a id="showProgramBtn" href="javascript:void(0);" onclick="showProgramFullScreen()" class="btn btn-sm btn-primary pull-right padRight">Show Full Screen</a>
            <a id="hideProgramBtn" href="javascript:void(0);" onclick="hideProgramFullScreen()" class="btn btn-sm btn-primary pull-right padRight" style="display: none;">Hide Full Screen</a>
        </h4>
        <div class="error" ng-show="programError">
            <h4>Incorrect program. Try again..</h4>
        </div>
        <span class="success" ng-show="programSuccess">
            <h4>Correct!!!...</h4>
        </span>
    </div>
    <div id="aceProgramEditor" ui-ace="{
      theme:'twilight',
      onLoad: aceLoaded
    }" ng-model="program.programTemplate" class="pull-left" style="width: 100%"></div>
    <div class="pull-right editor_btn_gap">
        <a ng-click="submitProgram()" class="btn btn-primary pull-right" style="color: #fff; margin-right: 10px;">Submit</a>
    </div>
</script>