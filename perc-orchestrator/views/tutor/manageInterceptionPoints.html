<div id="conformMessage" class="alert hide" ></div>
<div class="List_view" ng-cloak ng-show="workflowStep == 0">
    <div class=" askquestionHeader">
        <div class="headerAsk">
            <h2>Interception Points</h2>
        </div>
    </div>
    <div class="textEditor AskQEdit">
    	<div class="row">
    		<div class="col-md-12">
    			<label>Lecture*</label>
    			<select ng-il-multiselect='{"placeholder":"Select Learning Resource..."}' ng-model="selectedLR"  style="width: 100%;" ng-change="changeLearningResource(selectedLR)" ng-options="lob.label for lob in learningresources">
    			</select>
    		</div>
    	</div>	
    </div>
    <div class="textEditor AskQEdit">
    	<div class="row">
    		<div class="col-md-12">
    			<div id="primaryContentDiv" ng-show="showVideo" style="border: 1px solid #999;"></div>
    		</div>
    	</div>
    	<div class="row" style="margin-top:50px;" ng-if="isVideo && canWriteInterceptionPoint">
    		<div class="col-md-12">
    			<div id="saveIntAlert" class="col-md-12 alert hide" role="alert"></div>
    			<div id="intPointAlert" class="col-md-12 alert alert-danger hide" role="alert"></div>
    			<button class="btn btn-primary" ng-click="createInterception()">Create Interception</button>
    			<span> at </span>
    			<input id="currentTime" class="form-control" type="text" ng-model="interception.point" style="width: 150px;display:inline" /> (in seconds)
    		</div>
    	</div>
    </div>
    <div class="textEditor AskQEdit" ng-show="media">
    	<div class="row" style="border-bottom:1px solid #ededed;">
    		<div class="col-md-12">
    			<label>Interception Points:</label>
    		</div>
    	</div>
    	<div class="row" ng-show="!media.interceptions || media.interceptions.length == 0">
    		<div class="col-md-12  QAcontent">
    			No interception points.
    		</div>
    	</div>
    	<div class="row" ng-repeat="interception in media.interceptions" ng-show="media.interceptions.length > 0" style="border-bottom:1px solid #ededed;">
    		<div class="col-md-11 QAcontent">
    			<div>"{{interception.name}}" at {{interception.interceptionPoint}} seconds.</div>
    		</div>
    		<div class="pull-right col-md-1 QAcontent" style="cursor:pointer;" ng-if="canWriteInterceptionPoint">
					<i ng-click="deleteInterception(interception)" class="fa fa-trash-o"></i>
    		</div>
    	</div>
    </div>
</div>


<div class="List_view" ng-cloak ng-show="workflowStep == 1">
    <div class=" askquestionHeader">
        <div class="headerAsk">
            <h2>Create Interception Point</h2>
            <span class="backBtnCont">
	            <a href="javascript:void(0);" ng-click="workflowStep=0;" class="marginTop10 commonBackToList pull-right"><i class="fa fa-chevron-left"></i> Back</a>
        	</span>
        </div>

        <div class="textEditor AskQEdit">
	    	<div class="row" style="margin-bottom: 15px;">
	    		<div id="qsSearchQAlert" class="col-md-12 alert alert-danger hide" role="alert">Please fill all required fields.</div>
				<div class="col-md-12">
					<label>Questions from</label>
					<select ng-il-multiselect='{"placeholder":"Select Lecture...", "selectedDisable": true}' multiple="true" ng-model="questionSearchCriteria.learningElements" ng-options="lob.label for lob in questionSearch.learningElements" style="width: 100%;"></select>
				</div>
			</div>
			<div class="row" style="margin-bottom: 15px;">
			    <div class="col-md-12">
			        <label>Concepts</label>
			        <select ng-il-multiselect='{"placeholder":"Select Concepts..."}' multiple="true" ng-model="questionSearchCriteria.concepts" ng-options="object.name for object in questionSearch.concepts.getFullList()" style="width: 100%;"></select>

			        <!-- <input type="text" ng-model="selectedConceptforQuestionSet" class="form-control qa-concept-select" typeahead="object as object.name for object in questionSearch.concepts.getList(conceptTitleMap, $viewValue) | filter:{name:$viewValue}" typeahead-on-select="questionSearch.concepts.add($item, $model, $label);selectedConceptforQuestionSet = '';">

			        <div class="form-group" ng-repeat="concept in questionSearchCriteria.concepts">
			            <div class="col-sm-12 noPad">
			              <div class="checkbox" style="margin-bottom: 0px">
			                <label>
			                    <input type="checkbox" checked="" ng-click="questionSearch.concepts.remove(concept)" style="margin-top: 1px"> {{concept.name}}
			                </label>
			              </div>
			            </div>
			        </div> -->
			    </div>
			</div>
			<div class="row" style="margin-bottom: 15px;">
			    <div class="col-md-6">
			        <label>Purpose</label>
			        <select ng-model="questionSearchCriteria.purpose" class="form-control" ng-options="item.name for item in questionSearch.purpose.data" ng-change="questionSearch.purpose.setSubPurpose(questionSearchCriteria.purpose)">
			            <option value="">Select Purpose</option>
			         </select>
			    </div>
			    <div class="col-md-6">
			        <label>Subpurpose</label>
			        <div ng-dropdown-multiselect="" options="questionSearch.subPurpose" selected-model="questionSearchCriteria.subPurpose" extra-settings="{displayProp: 'name', externalIdProp: ''}"></div>
			    </div>
			</div>
			<div class="row" style="margin-bottom: 15px;">
			    <div class="col-md-6">
			        <label>Question Type</label>
			        <select ng-model="questionSearchCriteria.questionType" class="form-control" ng-options="questiontype as questiontype.name for questiontype in questionSearch.questionTypes">
			            <option value="">Select Question Type</option>
			         </select>
			    </div>
			    <div class="col-md-6">
			        <label>Question Subtype</label>
			        <div ng-dropdown-multiselect="" options="questionSearch.questionSubTypes" selected-model="questionSearchCriteria.questionSubType" extra-settings="{displayProp: 'name', externalIdProp: ''}"></div>
			    </div>
			</div>
			<div class="row" style="margin-bottom: 15px;">
				<div class="col-md-6">
			        <label>Outcome</label>
			        <div ng-dropdown-multiselect="" options="questionSearch.outcomes" selected-model="questionSearchCriteria.outcome" extra-settings="{displayProp: 'name', externalIdProp: ''}"></div>
			    </div>
			    <div class="col-md-6">
			        <label>Difficulty level</label>
			        <div ng-dropdown-multiselect="" options="questionSearch.difficultyLevels" selected-model="questionSearchCriteria.difficultyLevel" extra-settings="{displayProp: 'name', externalIdProp: ''}"></div>
			    </div>
			</div>
	    </div>

	    <div class="textEditor AskQEdit">
	    	<div class="save_btn">
	    		<button class="btn btn-default" ng-click="clearSearch()">Clear</button>
	    		<button id="searchQuestions" class="btn btn-primary" ng-click="searchQuestions()">Search</button>
	    		<button class="btn btn-primary" ng-click="previewIntraction()" ng-show="interception.questions.length > 0">Next</button>
	    	</div>
	    	<div class="clearfix" style="border-bottom: 1px solid #ededed; padding-bottom: 15px;"></div>
	    </div>

	    <div class="listviewContainer" ng-show="questions.show">
			<div class="QACol">
				<div class="row filter-tabs" style="border-bottom:1px solid #ededed; padding-bottom:10px;" ng-show="questions.data.length > 0">
	                <div class="listButton col-md-6">
	                    <div class="btn-group" role="group" aria-label="...">
	                        {{questions.count}} questions.
	                    </div>
	                </div>
	                <div class="listButton col-md-6" ng-show="interception.questions.length > 0">
	                    <div class="btn-group pull-right" role="group" aria-label="...">
	                        added {{interception.questions.length}} questions.
	                    </div>
	                </div>
	            </div>
	            <div ng-show="questions.data.length == 0">
	                <div class="alert alert-info fade in" role="alert">
	                    <p>There are no questions with given search criteria.</p>
	                </div>
	            </div>

	            <div class="row" ng-repeat="question in questions.data" style="border-bottom:1px solid #ededed;">
	                <div class="col-md-11" ng-include="'int_questions_list_item.html'"></div>
	                <div class="col-md-1 QAcontent form-group" style="text-align:center;margin-top:20px;">
						<a href="javascript:void(0);" style="cursor:pointer;" ng-click="interception.addQuestion(question)" ng-show="interception.questionIds.indexOf(question.identifier) == -1">
							Add
						</a>
						<a href="javascript:void(0);" style="cursor:pointer;" ng-click="interception.removeQuestion(question)" ng-show="interception.questionIds.indexOf(question.identifier) > -1">
							Remove
						</a>
					</div>
	            </div>
			</div>
		</div>
    </div>
</div>

<div class="List_view" ng-cloak ng-show="workflowStep == 2">
    <div class=" askquestionHeader">
        <div class="headerAsk">
            <h2>Create Interception Point</h2>
            <span class="backBtnCont">
	            <a href="javascript:void(0);" ng-click="workflowStep=0;" class="marginTop10 commonBackToList pull-right"><i class="fa fa-chevron-left"></i> Back</a>
        	</span>
        </div>

        <div class="textEditor AskQEdit">
        	<div class="row" style="border-bottom: 1px solid #ededed;">
        		<div id="saveIntErrorAlert" class="col-md-12 alert alert-danger hide" role="alert">Please fill required fields.</div>
        		<div class="col-md-12 QAcontent">
        			<div>Interception point for <b>"{{media.title}}"</b> at {{interception.point}} seconds.</div>
        		</div>
        	</div>
        	<div class="row" style="border-bottom: 1px solid #ededed;">
        		<div class="col-md-12 QAcontent">
        			<label>Name*</label>
			        <input type="text" ng-model="interception.name" class="form-control" >
        		</div>
        	</div>
        	<div class="row" style="border-bottom: 1px solid #ededed;padding-bottom: 20px; padding-top: 10px;">
        		<div class="col-md-6">
			        <label>Number of Attempts*</label>
			        <input type="text" ng-model="interception.numAttempts" class="form-control" >
			    </div>
			    <div class="col-md-6">
			        <label>Number of Questions*</label>
			        <input type="text" ng-model="interception.numQuestions" class="form-control" >
			    </div>
        	</div>

	    </div>

	    <div class="textEditor AskQEdit" style="padding-bottom: 0px;">
	    	<div class="save_btn">
	    		<button id="saveInterception" class="btn btn-primary" ng-click="saveInterception()">Save</button>
	    	</div>
	    	<div class="clearfix" style="border-bottom: 1px solid #ededed; padding-bottom: 15px;"></div>
	    </div>

	    <div class="listviewContainer">
			<div class="QACol">
				<div class="row filter-tabs" style="border-bottom:1px solid #ededed; padding-bottom:10px;" ng-show="questions.data.length > 0">
	                <div class="listButton col-md-12">
	                    <div class="btn-group" role="group" aria-label="...">
	                        {{interception.questions.length}} questions.
	                    </div>
	                </div>
	            </div>
	            <div ng-show="interception.questions.length == 0">
	                <div class="alert alert-info fade in" role="alert">
	                    <p>There are no questions </p>
	                </div>
	            </div>

	            <div class="row" ng-repeat="question in interception.questions" style="border-bottom:1px solid #ededed;">
	                <div ng-include="'int_questions_list_item.html'"></div>
	            </div>
			</div>
		</div>
    </div>
</div>
<!--popup start-->
<!-- popup Modal -->
<div class="modal fade" id="questionPreviewModal" tabindex="-1" role="dialog" aria-labelledby="question-popup-box" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <br/>
            </div>
            <div class="modal-body" style="display:flex;">
                <div id="popupQuestionContainer">
                    <div id="popupPreviewQuestion" class="col-md-12 row-fluid"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--popup ends-->