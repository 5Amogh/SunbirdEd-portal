<div id="conformMessage" class="alert hide" ></div>
<div class="List_view ng-cloak" ng-cloak>
    <div class=" askquestionHeader">
        <div class="headerAsk">
            <h2>Question Papers
                <a href="javascript:void(0);" class="tool-tip" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Create Question Paper" ng-if="canWriteQuestionPaper"><i ng-click="createQuestionPaper()" class="writeBlackOne fa fa-edit" id="writeIcon"></i></a>
                <a href="javascript:void(0);" class="tool-tip" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Search Question Papers"><i ng-click="showSearchForm()" class="writeBlackOne  fa fa-search" id="questionpaperSearchButton"></i></a>
            </h2>
        </div>

        <div id="questionpaperSearchForm" class="col-md-12 noPad marginTop20" style="display:none;">
            <div class="col-md-6 noPad searchFormLeftDiv">
                <div class="form-group col-md-12 noPad">
                    <select ng-il-multiselect='{"placeholder":"Select Lecture...", "selectedDisable": true}' multiple="true" ng-model="qpSearchCriteria.learningElements" ng-options="lob.label for lob in quesionPaperSearch.learningElements" style="width: 100%;"></select>
                </div>
            </div>
            <div class="col-md-6 noPad searchFormRightDiv">
                <div class="form-group col-md-12 noPad">
                    <select ng-model="qpSearchCriteria.testType" class="form-control" ng-options="item for item in quesionPaperSearch.testTypes" ng-change="questionPapers.show=false;">
                    </select>
                </div>
                <div class="form-group col-md-12 noPad">
                    <button class="btn btn-large btn-default searchFormButton" id="searchQuestionPapers" ng-click="autoSearch=false;searchQuestionPapers()">Search</button>
                </div>
            </div>
        </div>
        <div class="text-center" ng-if="questionPapers.loading" style="margin-top: 50px">
            Loading <img src="/img/loading.gif"/>
        </div>
        <div class="listviewContainer" ng-show="questionPapers.show">
            <div class="QACol">
                <div ng-show="questionPapers.count == 0">
                    <div class="alert alert-info fade in" role="alert">
                        <p>There are no question papers with given search criteria.</p>
                    </div>
                </div>
                <div class="row" ng-init="questionPaper.editable=canWriteQuestionPaper;" ng-repeat="questionPaper in questionPapers.data | limitTo:questionPapers.currentDisplayCount" style="border-bottom: 1px solid #ededed;">
                    <div ng-include="'questionpaper_list_item.html'"></div>
                </div>
                <a href="javascript:void(0)" class="col-md-12 text-center show-more" ng-hide="!questionPapers.data.length || questionPapers.currentDisplayCount >= questionPapers.data.length" ng-click="showMore()">
                    <span ng-if="!showMoreLoading">Show More</span>
                    <span ng-if="showMoreLoading">Loading <img src="/img/loading.gif"/></span>
                </a>
            </div>
        </div>

    </div>
</div>

<div class="modal fade" id="questionPaperDeleteModal">
    <div class="modal-dialog modal-dialog-center">
        <div class="modal-content" style="margin-top: 25%">
            <div class="alert fade in" role="alert" style="margin-bottom: 0px">
                <h4>Warning!!</h4>
                <p>Are you sure you want to delete this Question Paper?</p>
                <div class="modalActionContainer">
                    <p style="padding-top: 10px; display: inline-block;" class="pull-right">                        
                        <button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Cancel</button>
                        <button type="button" data-dismiss="modal" ng-click="deleteQuestionPaper()" class="btn btn-sm btn-primary marginLeft10">Delete</button>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
var questionPaperContextSearchPrevValue = '';
$(document).ready(function() {
    $('.questionpaper-context-select').on('click focusin',function(evt) {
        evt.stopPropagation();
        $(".questionpaper-context-container").toggleClass("questionpaper-context-container-hover");
        $('.questionpaper-context-select').val('');
    });
    $(document).click(function() {
        $('.questionpaper-context-container').removeClass('questionpaper-context-container-hover');
        if ($('.questionpaper-context-select').val() == '') {
            $('.questionpaper-context-select').val(questionPaperContextSearchPrevValue);
        }
    });
});
</script>
