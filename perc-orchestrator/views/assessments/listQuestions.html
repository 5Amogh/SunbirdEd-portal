<div class="List_view ng-cloak" ng-cloak>
    <div class=" askquestionHeader">
        <div class="headerAsk col-md-12 noPad">
            <h2>Questions
                <a href="javascript:void(0);" class="tool-tip" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Import Questions" ng-if="canWriteQuestion"><i ng-click="showImportQuestions()" class="writeBlackOne fa fa-upload importBtn" id="writeIcon"></i></a>
                <a href="javascript:void(0);" class="tool-tip" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Create Question" ng-if="canWriteQuestion"><i ng-click="createQuestion()" class="writeBlackOne  fa fa-edit" id="writeIcon"></i></a>
                <a href="javascript:void(0);" class="tool-tip" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Search Questions"><i ng-click="showSearchForm()" class="writeBlackOne  fa fa-search" id="questionSearchButton"></i></a>
            </h2>
        </div>
        <!-- Import Questions Start -->
        <div class="textEditor AskQEdit col-md-12 noPad" id="il-Txt-Editor" style="display:none;">
            <div ng-show="questionsImportData.errorUpload" class="alert alert-danger marginTop10" role="alert">Error while uploading the file.</div>
            <div ng-hide="questionsImportData.isCSVFile" class="alert alert-danger marginTop10" role="alert">Please Select the CSV file.</div>
            <div id="importMessage" class="alert hide" role="alert"></div>
            <form class="form-horizontal" role="form">
                <div class="col-md-12 noPad">
                    <div class="form-group col-md-5">
                        <span class="control-label moveDown5">Items Type</span>
                        <div class="form-control-static">
                            <select style="width:60% !important;" class="form-control" ng-options="itemType for itemType in questionsImportForm.itemTypes" ng-model="questionsImportData.itemType">
                            </select>
                        </div>
                    </div>
                    <div class="form-group col-md-5">
                        <span for="file" class="control-label moveDown5">File</span>
                        <div class="form-control-static">
                            <input type="file" file-model="csvFile" ng-file-select="onSelectImportFile($files)">
                        </div>
                    </div>
                    <div class="col-md-2 noPad marginTop20 pull-right">
                        <div class="">
                            <button id="importQuestions" type="submit" class="btn btn-primary" ng-show="csvFile && questionsImportData.isCSVFile" ng-click="importQuestions()">Upload</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <!-- Import Questions End -->

        <!-- Search Block Start -->
        <div id="questionSearchForm" class="col-md-12 noPad marginTop20" style="display:none;">
            <div class="col-md-6 noPad searchFormLeftDiv">
                <div class="form-group col-md-12 noPad">
                    <div>Questions for</div>
                    <select ng-il-multiselect='{"placeholder":"Select Lecture...", "selectedDisable": true}' multiple="true" ng-model="listQuestionsFilters.learningElements" ng-options="lecture.label for lecture in quesionsSearch.learningElements" style="width: 100%;"></select>
                </div>
                <div class="form-group col-md-12 noPad">
                    <div>Concepts</div>
                    <select ng-il-multiselect='{"placeholder":"Select Concepts..."}' multiple="true" ng-model="listQuestionsFilters.selectedConcepts" ng-options="object.name for object in getQuestionSetConceptList(conceptTitleMap)" style="width: 100%;"></select>
                </div>
                <div class="form-group col-md-12 noPad">
                    <div>Outcome</div>
                    <div ng-dropdown-multiselect="" options="courseOutcomes" selected-model="listQuestionsFilters.selectedOutcome" extra-settings="{displayProp: 'name', externalIdProp: ''}"></div>
                </div>
                <div class="form-group col-md-12 noPad">
                    <div>Difficulty level</div>
                    <div ng-dropdown-multiselect="" options="difficultyLevels" selected-model="listQuestionsFilters.selectedDifficultyLevel" extra-settings="{displayProp: 'name', externalIdProp: ''}"></div>
                </div>
            </div>    

            <div class="col-md-6 noPad searchFormRightDiv">
                <div class="form-group col-md-12 noPad">
                    <div>Purpose</div>
                    <select ng-model="listQuestionsFilters.purpose" class="form-control" ng-options="item.name for item in purpose" ng-change="setSubpurpose(listQuestionsFilters.purpose)">
                        <option value="">Select Purpose</option>
                    </select>
                </div>
                <div class="form-group col-md-12 noPad">
                    <div>Subpurpose</div>
                    <div ng-dropdown-multiselect="" options="subPurpose" selected-model="listQuestionsFilters.selectedSubPurpose" extra-settings="{displayProp: 'name', externalIdProp: ''}"></div>
                </div>
                <div class="form-group col-md-12 noPad">
                    <div>Question Type</div>
                    <select ng-model="listQuestionsFilters.selectedQuestionType" class="form-control" ng-options="questiontype for questiontype in questionTypes">
                        <option value="">Select Question Type</option>
                    </select>
                </div>
                <div class="form-group col-md-12 noPad">
                    <div>Question Subtype</div>
                    <div ng-dropdown-multiselect="" options="questionSubTypes" selected-model="listQuestionsFilters.selectedQuestionSubType" extra-settings="{displayProp: 'name', externalIdProp: ''}"></div>
                </div>
                <div class="form-group col-md-12 noPad">
                    <button class="btn btn-large btn-default searchFormButton" id="searchQuestions" ng-click="autoSearch=false;searchQuestions()">Search</button>
                </div>
            </div>
        </div>
        <!-- Search Block End -->

        <div class="col-md-12 noPad" ng-show="showSearchResult">
            <div class="text-center" ng-if="showLoading" style="margin-top: 50px">
                Loading <img src="/img/loading.gif"/>
            </div>
            <div class="QACol">
                <div class="row" ng-repeat="question in searchResult | limitTo:resultLimit">
                    <div ng-init="question.editable=canWriteQuestion;" ng-include="'questions_list_item.html'"></div>
                </div>
                <div style="padding-bottom:10px;">
                    <a href="javascript:void(0)" class="col-md-12 text-center show-more" ng-hide="resultLimit >= searchResult.length" ng-click="updateResultLimit()">
                        <span ng-if="!showMoreLoading">Show More</span>
                        <span ng-if="showMoreLoading">Loading <img src="/img/loading.gif"/></span>
                    </a>
                </div>
            </div>
            <div class="alert alert-info fade in" role="alert" ng-show="searchResult.length == 0 && !showLoading">
                <p>There are no questions with given search criteria.</p>
            </div>
        </div>
    </div>
</div>


<!--popup start-->
<!-- popup Modal -->
<div class="modal fade" id="questionPreviewModal" tabindex="-1" role="dialog" aria-labelledby="question-popup-box" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <br/>
            </div>
            <div class="modal-body" style="display:flex;">
                <div id="popupQuestionContainer">
                    <div id="popupPreviewQuestion" class="col-md-12 row-fluid"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="questionDeleteModal">
    <div class="modal-dialog modal-dialog-center">
        <div class="modal-content" style="margin-top: 25%">
            <div class="alert fade in" role="alert" style="margin-bottom: 0px">
                <h4>Warning!!</h4>
                <p>Are you sure you want to delete this question?</p>
                <div class="modalActionContainer">
                    <p style="padding-top: 10px; display: inline-block;" class="pull-right">                        
                        <button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Cancel</button>
                        <button type="button" data-dismiss="modal" ng-click="deleteQuestion()" class="btn btn-sm btn-primary marginLeft10">Delete</button>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
<!--popup ends-->

<script type="text/javascript">
var qaSetContextSearchPrevValue = '';
$(document).ready(function() {
    $('.qasetcontextselect').click(function(evt) {
        evt.stopPropagation();
        $(".qaset-context-container").toggleClass("qaset-context-container-hover");
        $('.qasetcontextselect').val('');
    });
    $(document).click(function() {
        $('.qaset-context-container').removeClass('qaset-context-container-hover');
        if ($('.qasetcontextselect').val() == '') {
            $('.qasetcontextselect').val(qaSetContextSearchPrevValue);
        }
    });
});
</script>