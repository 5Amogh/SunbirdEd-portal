<div class="headerAsk">
    <h2 style="margin-top: 11px; margin-bottom: 11px">{{selectedCourse.name}}</h2>
    <span class="backBtnCont">
        <a href="javascript:void(0)" class="backBtn pull-right" ng-click="showCourseSettings = false">
            <i class="fa fa-chevron-left"></i> back to all courses
        </a>
    </span>
</div>
<div class="QACol padTop">
    <div class="col-md-12 noPad">
        <div class="alert {{alertClass}} text-center" ng-show="alertMsg">
            {{alertMsg}}
        </div>
        <div class="alert alert-info text-center" ng-show="progressMsg">
            {{progressMsg}} <img src="/img/loading.gif"/>
        </div>
        <table class="table table-striped table-bordered">
            <thead>
            <tr>
                <th style="width: 3%">#</th>
                <th style="width: 20%">Setting</th>
                <th style="width: 20%">Value</th>
                <th style="width: 40%">Comments</th>
                <th style="width: 20%">Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>1</td>
                <td>Course Inbox</td>
                <td>
                    <span ng-if="selectedCourse.inboxEmailId" style="color:green">{{selectedCourse.inboxEmailId}}</span>
                    <span ng-if="!selectedCourse.inboxEmailId" style="color:red">Provide One</span>
                </td>
                <td>
                    Course inbox is required for forums to be working
                </td>
                <td>
                    <a class="btn-link" href="javascript:void(0)" ng-if="selectedCourse.inboxEmailId" onclick="$('#courseSettingsModal').modal('show');">Update Inbox</a>
                    <a class="btn-link" href="javascript:void(0)" ng-if="!selectedCourse.inboxEmailId" onclick="$('#courseSettingsModal').modal('show');">Add Inbox</a>
                </td>
            </tr>
            <tr>
                <td>2</td>
                <td>Course Inbox Tokens</td>
                <td>
                    <span ng-if="checkingTokens">Checking <img src="/img/loading.gif"/></span>
                    <span ng-if="!checkingTokens" ng-show="!selectedCourse.inboxEmailId" style="color:red">Add Inbox to authorize</span>
                    <span ng-if="selectedCourse.inboxEmailId && !checkingTokens" ng-show="!selectedCourse.tokensResp.hasTokens" style="color:red">Not authorized</span>
                    <span ng-if="!checkingTokens" ng-show="selectedCourse.tokensResp.hasTokens && !selectedCourse.tokensResp.tokensWorking" style="color:red">Tokens not valid</span>
                    <span ng-if="!checkingTokens" ng-show="selectedCourse.tokensResp.hasTokens && selectedCourse.tokensResp.tokensWorking" style="color:green">Tokens active</span>
                </td>
                <td>
                    Course inbox should be authorized and the tokens should be valid for forums to be working
                </td>
                <td>
                    <a class="btn-link" href="/v1/gmail/authorize/{{selectedCourse.inboxEmailId}}" ng-if="selectedCourse.inboxEmailId && !selectedCourse.tokensResp.hasTokens">Authorize</a>
                    <a class="btn-link" href="/v1/gmail/authorize/{{selectedCourse.inboxEmailId}}" ng-if="selectedCourse.tokensResp.hasTokens && !selectedCourse.tokensResp.tokensWorking">Re-Authorize</a>
                </td>
            </tr>
            <tr>
                <td>3</td>
                <td>Course Community</td>
                <td>
                    <span ng-if="selectedCourse.community && selectedCourse.community.userId" style="color:green">Setup completed</span>
                    <span ng-if="!selectedCourse.community || !selectedCourse.community.userId" style="color:red">Setup required</span>
                </td>
                <td>
                    Community setup is required for faculty/coach groups and announcements to be working properly
                </td>
                <td>
                    <a class="btn-link" href="javascript:void(0)" ng-if="!selectedCourse.community || !selectedCourse.community.userId" ng-click="setCommunity();">Setup</a>
                    <a class="btn-link" href="javascript:void(0)" ng-if="selectedCourse.community && selectedCourse.community.userId" ng-click="resetCommunity();">Reset</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <hr/>
</div>
<div class="modal fade" id="courseSettingsModal">
    <div class="modal-dialog modal-dialog-center">
        <div class="modal-content" style="width: 500px;">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                <h3>Add/Update Course Inbox</h3>
            </div>
            <div class="modal-body">
                <input type="text" class="form-control" ng-model="selectedCourse.inboxEmailId"/>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" ng-click="setCourseInbox()">Save</button>
            </div>
        </div>
    </div>
</div>