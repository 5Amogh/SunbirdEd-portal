<div ng-if="noteList.courseId">
    <div ng-controller="courseScheduleCtrl as toc" ng-include="'views/course/courseHeader.html'"></div>
</div>
<div class="ui grid">
    <div class="one wide column"></div>
    <div class="ten wide column">
        <div class="ui segment margin-auto padding-left-right-0 padding-top-bottom-0 " ng-init="noteList.ngInit()">
            <div class="ui grid margin-top-0 margin-left-right-0 margin-bottom-0 height-100" id="notesList" 
                 ng-if="(!noteList.searchApi.loader.showLoader && !noteList.searchApi.error.showError) || noteList.notesList.length > 0">
                <div class="twelve wide column" ng-if="!noteList.update.showUpdateNote">
                    <div class="addnotes ui container padding-bottom-15 container-with-button padding-left-right-0">
                        <span class="ui header">My Notes</span>
                        <i class=" circular icon margin-left-right-10 link" ng-class="!noteList.add.showCreateNote ? 'plus' : 'remove'" ng-click="noteList.add.showCreateNote = !noteList.add.showCreateNote;"></i>
                        <h5 class="ui right floated basic icon circular button" ng-click="noteList.closeNoteList()">
                            <i class="ui remove icon"></i>
                        </h5>
                    </div>
                    <div ng-if="noteList.add.showCreateNote">
                        <div ng-include="'views/note/createNote.html'"></div>
                    </div>
                    <div class="ui fluid icon input">
                        <input type="text" ng-model="noteList.searchData.text"  placeholder="Search for notes or title" title="Search" />
                        <i class="circular search link icon"></i>
                    </div>
                    <!--                    <div class="ui fluid icon input">
                                            <input type="text" ng-model="noteList.searchData.text" ng-change="noteList.searchNote(noteList.searchData.text)" placeholder="Search for notes or title" title="Search" />
                                            <i class="circular search link icon" ng-click="noteList.searchNote(noteList.searchData.text)"></i>
                                        </div>-->
                    <div class="ui items" ng-repeat="note in noteList.notesList| orderBy : '-lastUpdatedOn' | noteListFilter:noteList.searchData.text ">
                        <div class="ui clearing divider"></div>
                        <div class="item">
                            <div class="content">
                                <div class="ui row margin-left-right-0">
                                    <span class="ui small header mouse-pointer" ng-click="noteList.update.showUpdateNote = !noteList.update.showUpdateNote; noteList.update.metaData = note;"> {{ note.title | limitTo: 40 }}
                                    </span>
                                    <i ng-show="note.title.length > 15" class="ellipsis horizontal icon popup-button" data-content="{{note.titles}}"
                                       data-variation="wide">
                                    </i>
                                    <span class="circleicon"><i class=" large remove circle icon margin-bottom-0 link"  ng-click="noteList.removeNote(note.identifier)"></i></span>
                                </div>
                                <div class="meta">
                                    <span class="time font-size-small">{{note.lastUpdatedOn| dateFilterXTimeAgo}}</span>
                                </div>
                                <div class="description">
                                    <div class="description" ng-init="noteData = note.note.length > 70 ? note.note.substring(-1,70) : note.note">
                                        <pagedown-viewer content="noteData"></pagedown-viewer>
                                        <i ng-if="note.note.length > 70" class="ellipsis horizontal icon popup-button" data-content="{{note.note}}"
                                           data-variation="wide">
                                        </i> 
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="twelve wide column" ng-if="noteList.update.showUpdateNote">
                    <div ng-include="'views/note/updateNote.html'"></div>
                </div>
            </div>
        </div>
        <div ng-if="noteList.searchApi.loader.showLoader">
            <app-loader data="{{noteList.searchApi.loader}}"></app-loader>
        </div>
        <div ng-if="noteList.searchApi.error.showError && noteList.notesList.length === 0">
            <error-message data="{{noteList.searchApi.error}}" visibility="noteList.searchApi.error.showError"></error-message>
        </div>
    </div>
    <div class="one wide column"></div>
</div>
