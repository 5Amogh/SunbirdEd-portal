<div *ngIf='!showTemplatePopup && showForm' class="p-24">
  <app-question-creation-header (buttonType)="buttonTypeHandler($event)" [questionMetaData]="questionMetaData"
    [disableSubmission]="isEditorThrowingError"></app-question-creation-header>
  <form #mcqFormControl="ngForm" class="ui form mcq-vertical mt-8" *ngIf="!showPreview">
    <div class="field mcq-title">
      <label class="mb-16 fs-1-286">Question</label>
      <label *ngIf="showFormError && [undefined, ''].includes(mcqForm.question)"
        class="ui basic red error label pt-0">Fill Question</label>
      <app-ckeditor-tool (editorDataOutput)="mcqForm.question = $event.body; getMedia($event.mediaobj);" [editorConfig]="questionMetaData"
        [editorDataInput]="mcqForm.question"></app-ckeditor-tool>
    </div>
    <div class="mcq-options">
      <label *ngIf="showFormError && !mcqForm.answer" class="ui basic red error label pt-0">Select one correct answer</label>
      <div class="mcq-option" *ngFor="let option of mcqForm.options; let i=index">
          <div class="twelve wide field">
            <label class="mb-8 fs-1">Option {{i + 1}}:</label>
            <label *ngIf="showFormError && (option.body === undefined || option.body === '')"
              class="ui basic red error label pt-0">Fill this options</label>
            <app-ckeditor-tool (hasError)="handleEditorError($event)"
              (editorDataOutput)="option.body = $event.body; option.length = $event.length; getMedia($event.mediaobj)"
              [editorConfig]="questionMetaData" [editorDataInput]="option.body" [setCharacterLimit]="setCharacterLimit"
              [setImageLimit]="setImageLimit"></app-ckeditor-tool>
            <div class="mcq-checkbox-answer">
              <label>Mark as right answer</label>
              <sui-radio-button name="'correct_response'" value={{i}} [(ngModel)]="mcqForm.answer"></sui-radio-button>
            </div>
            <label *ngIf="showFormError && option.length > 160" class="ui basic red error label pt-0">please reduce the size</label>
          </div>
      </div>
    </div>
      <div class="ui two column grid">
        <div class="column">
          <label>Learning Outcome</label>
          <sui-select class="selection" #learningOutcome="ngModel" [(ngModel)]="mcqForm.learningOutcome"
            name="'learningOutcome'" required>
            <sui-select-option *ngFor="let option of learningOutcomeOptions" [value]="option"></sui-select-option>
          </sui-select>
          <label class="ui basic red error label pt-0"
            *ngIf="(learningOutcome.touched || showFormError) && learningOutcome.invalid">Fill Learning Outcome</label>
        </div>
        <div class="column">
          <label>Difficulty:</label>
          <div class="d-flex">
          <div class="ui radio checkbox sb-radio-btn sb-radio-primary mr-8">
              <sui-radio-button #difficultyLevel="ngModel" name="'difficultyLevel'" value="Easy"
                [(ngModel)]="mcqForm.difficultyLevel" required>Easy</sui-radio-button>
            </div>
            <div class="ui radio checkbox sb-radio-btn sb-radio-primary mr-8">
                <sui-radio-button name="'difficultyLevel'" value="Medium" [(ngModel)]="mcqForm.difficultyLevel" required>
                  Medium</sui-radio-button>
              </div>
              <div class="ui radio checkbox sb-radio-btn sb-radio-primary mr-8">
                  <sui-radio-button name="'difficultyLevel'" value="Hard" [(ngModel)]="mcqForm.difficultyLevel" required>
                    Hard</sui-radio-button>
                </div>
          <label class="ui basic red error label pt-0"
            *ngIf="(difficultyLevel.touched || showFormError) && difficultyLevel.invalid">Fill Difficulty Level </label>
        </div>
      </div>
      <div class="column">
          <label>Blooms Level</label>
          <sui-select class="selection" #bloomsLevel="ngModel" [(ngModel)]="mcqForm.bloomsLevel" name="'bloomsLevel'"
            required>
            <sui-select-option *ngFor="let option of bloomsLevelOptions" [value]="option"></sui-select-option>
          </sui-select>
          <label class="ui basic red error label pt-0"
            *ngIf="(bloomsLevel.touched || showFormError) && bloomsLevel.invalid">Fill Blooms Level </label>
        </div>
        <div class="column">
          <label>Marks</label>
          <input type="text" #maxScore="ngModel" name="'maxScore'" [(ngModel)]="mcqForm.maxScore" placeholder="Marks"
            required>
          <label *ngIf="(maxScore.touched || showFormError) && maxScore.invalid"
            class="ui basic red error label pt-0">Marks is mandatory</label>
        </div>
    </div>
  </form>
  <app-question-preview *ngIf="showPreview" [questionMetaData]="previewData"></app-question-preview>
</div>

<app-mcq-template-selection *ngIf='showTemplatePopup' (templateSelection)="handleTemplateSelection($event)">
</app-mcq-template-selection>