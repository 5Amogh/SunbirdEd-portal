
<div *ngIf='!showLoader && !showError' class="ui container sb-chapter-list" [appTelemetryImpression]="telemetryImpression">
  <div *ngIf="textBookChapters.length" class="mt-16">
    <sui-accordion class="styled fluid sb-accordion" [closeOthers]="true">
      <sui-accordion-panel [isOpen]="(selectedAttributes.lastOpenedUnit == 0) ? (i == 0) : (selectedAttributes.lastOpenedUnit == textbook.identifier)" *ngFor="let textbook of textBookChapters; let i = index">
        <div title class="sb-accordion-title">
          {{textbook.name}} ( {{textbook.topic}} )
          <i class="chevron down icon right-floated d-flex flex-ai-center"></i>
        </div>
        <div content class="sb-table-container my-0 sb-accordion-content">
          <table class="sb-table sb-table-fixed sb-table-hover">
            <thead class="sb-table-header heading-large">
              <tr>
                <th></th>
                <th>{{labels[0]}}</th>
                <th>{{labels[1]}}</th>
                <th *ngIf="selectedAttributes.currentRole === 'CONTRIBUTOR'">{{labels[2]}}</th>
                <th></th>
              </tr>
            </thead>
            <tbody class="sb-table-body body-large">
              <tr (click)="emitQuestionTypeTopic('vsa', textbook.topic, textbook.identifier)" 
              appTelemetryInteract [telemetryInteractEdata]="{id:'vsa_tr',type:'click',pageid:'chapterlist',extra:{type:'reference',category:'VSA',topic:textbook.topic}}">
                <td>{{questionTypeName[textbook.vsa.name]}}</td>
                <td>{{textbook.vsa.total}}</td>
                <td>{{textbook.vsa.me}}</td>
                <td *ngIf="selectedAttributes.currentRole === 'CONTRIBUTOR'">{{textbook.vsa.attention}}</td>
                <td><button class="sb-btn sb-btn-primary sb-btn-normal" 
                  (click)="emitQuestionTypeTopic('vsa', textbook.topic, textbook.identifier)" 
                  appTelemetryInteract [telemetryInteractEdata]="{id:'open_vsa_questions',type:'click',pageid:'chapterlist',extra:{type:'reference',category:'VSA',topic:textbook.topic}}" >open</button></td>
              </tr>
              <tr (click)="emitQuestionTypeTopic('sa', textbook.topic,textbook.identifier)"
              appTelemetryInteract [telemetryInteractEdata]="{id:'sa_tr',type: 'click',pageid:'chapterlist',extra:{type:'reference',category:'SA',topic:textbook.topic}}">
                <td>{{questionTypeName[textbook.sa.name]}}</td>
                <td>{{textbook.sa.total}}</td>
                <td>{{textbook.sa.me}}</td>
                <td *ngIf="selectedAttributes.currentRole === 'CONTRIBUTOR'">{{textbook.sa.attention}}</td>
                <td><button class="sb-btn sb-btn-primary sb-btn-normal" (click)="emitQuestionTypeTopic('sa', textbook.topic, textbook.identifier)" 
                  appTelemetryInteract [telemetryInteractEdata]="{id:'open_sa_questions',type:'click',pageid:'chapterlist',extra:{type:'reference',category:'SA',topic:textbook.topic}}">open</button></td>
              </tr>
              <tr (click)="emitQuestionTypeTopic('la', textbook.topic, textbook.identifier)" 
              appTelemetryInteract [telemetryInteractEdata]="{id:'la_tr',type:'click',pageid:'chapterlist',extra:{type:'reference',category:'LA',topic:textbook.topic}}">
                <td>{{questionTypeName[textbook.la.name]}}</td>
                <td>{{textbook.la.total}}</td>
                <td>{{textbook.la.me}}</td>
                <td *ngIf="selectedAttributes.currentRole === 'CONTRIBUTOR'">{{textbook.la.attention}}</td>
                <td><button class="sb-btn sb-btn-primary sb-btn-normal" (click)="emitQuestionTypeTopic('la', textbook.topic, textbook.identifier)" 
                  appTelemetryInteract [telemetryInteractEdata]="{id:'open_la_questions',type:'click',pageid:'chapterlist',extra:{type:'reference',category:'LA',topic:textbook.topic}}">open</button></td>
              </tr>
              <tr (click)="emitQuestionTypeTopic('mcq', textbook.topic, textbook.identifier)" 
              appTelemetryInteract [telemetryInteractEdata]="{id:'mcq_tr',type:'click',pageid:'chapterlist',extra:{type:'mcq',category:'MCQ',topic:textbook.topic}}">
                <td>{{questionTypeName[textbook.mcq.name]}}</td>
                <td>{{textbook.mcq.total}}</td>
                <td>{{textbook.mcq.me}}</td>
                <td *ngIf="selectedAttributes.currentRole === 'CONTRIBUTOR'">{{textbook.mcq.attention}}</td>
                <td><button class="sb-btn sb-btn-primary sb-btn-normal" (click)="emitQuestionTypeTopic('mcq', textbook.topic,textbook.identifier)" 
                  appTelemetryInteract [telemetryInteractEdata]="{id:'open_mcq_questions',type:'click',pageid:'chapterlist',extra:{type:'mcq',category:'MCQ',topic:textbook.topic}}">open</button></td>
              </tr>
            </tbody>
          </table>
        </div>
      </sui-accordion-panel>
    </sui-accordion>
  </div>
  <div class="twelve wide column" *ngIf="!textBookChapters.length">
    <app-no-result></app-no-result>
  </div>
</div>
<app-loader *ngIf='showLoader && !showError'></app-loader>