
<div *ngIf='!showLoader && !showError' class="ui container sb-chapter-list" [appTelemetryImpression]="telemetryImpression">
  <div *ngIf="textBookChapters.length" class="mt-16">
    <sui-accordion class="styled fluid sb-accordion" [closeOthers]="true">
      <sui-accordion-panel [isOpen]="(selectedAttributes.lastOpenedUnit == 0) ? (i == 0) : (selectedAttributes.lastOpenedUnit == textbook.identifier)" *ngFor="let textbook of textBookChapters; let i = index">
        <div title class="sb-accordion-title">
          {{textbook.name}} ( {{textbook.topic}} )
          <i class="chevron down icon right-floated d-flex flex-ai-center"></i>
        </div>
        <div content class="sb-table-container my-0 sb-accordion-content">
          <table class="sb-table sb-table-fixed sb-table-hover">
            <thead class="sb-table-header heading-large">
              <tr>
                <th>{{'Question Category'}}</th>
                <th>{{labels[0]}}</th>
                <th>{{labels[1]}}</th>
                <th *ngIf="labels[2]">{{labels[2]}}</th>
                <th></th>
              </tr>
            </thead>
            <tbody class="sb-table-body body-large"  *ngFor = "let question_category of routerQuestionCategory; let z = index">
              <tr (click)="emitQuestionTypeTopic(question_category, textbook.topic, textbook.identifier, textbook[question_category].buttonStatus, textbook[question_category].resourceName)"
              appTelemetryInteract [telemetryInteractEdata]="{id: question_category+'_tr', type:'click', pageid:'chapterlist', extra:{type: questionPattern[i] ,category: question_category ,topic:textbook.topic}}">
                <td>{{questionTypeName[textbook[question_category].name]}}</td>
                <td>{{textbook[question_category].total}}</td>
                <td>{{textbook[question_category].me}}</td>
                <td *ngIf="selectedAttributes.currentRole !== 'REVIEWER'">{{textbook[question_category].attention}}</td>
                <td *ngIf="selectedAttributes.currentRole !== 'PUBLISHER'"><button class="sb-btn sb-btn-primary sb-btn-normal"
                  (click)="emitQuestionTypeTopic(question_category, textbook.topic, textbook.identifier, textbook[question_category].buttonStatus, textbook[question_category].resourceName)"
                  appTelemetryInteract [telemetryInteractEdata]="{id:'open_' + question_category + '_questions',type:'click',pageid:'chapterlist',extra:{type: questionPattern[z],category: question_category ,topic:textbook.topic}}" >Open</button></td>
                <td *ngIf="selectedAttributes.currentRole === 'PUBLISHER'"><button class="sb-btn sb-btn-primary sb-btn-normal"
                  (click)="emitQuestionTypeTopic(question_category, textbook.topic, textbook.identifier, textbook[question_category].buttonStatus, textbook[question_category].resourceName)"
                  appTelemetryInteract [telemetryInteractEdata]="{id:'open_' + question_category + '_questions',type:'click',pageid:'chapterlist',extra:{type: questionPattern[z],category: question_category ,topic:textbook.topic}}" >{{textbook[question_category].buttonStatus ? 'Edit' : 'Create' }}</button></td>
              </tr>
            </tbody>
          </table>
        </div>
      </sui-accordion-panel>
    </sui-accordion>
  </div>
  <div class="twelve wide column" *ngIf="!textBookChapters.length">
    <app-no-result></app-no-result>
  </div>
</div>
<app-loader *ngIf='showLoader && !showError'></app-loader>
