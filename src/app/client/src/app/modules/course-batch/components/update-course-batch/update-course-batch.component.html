<sui-modal *ngIf='showUpdateModal' (dismissed)="redirect()" [isClosable]="false" [isFullScreen]="true"
  #updateBatchModal class="fullpage">
  <div class="header">
    <div class="ui grid">
      <div class="eleven wide column">
        <span class="ui header">{{resourceService?.frmelmnts?.intxt?.t0007}}</span>
      </div>
      <div class="one wide Right floated right aligned column" appTelemetryInteract [telemetryInteractObject]="telemetryInteractObject"
        [telemetryInteractEdata]="closeInteractEdata" (click)="redirect()">
        <i class="close large icon cursor-pointer" tabindex="0"></i>
      </div>
    </div>
  </div>

  <div *ngIf="stepNumber === 1" [appTelemetryStart]="telemetryStart" [appTelemetryImpression]="telemetryImpression"
    class="scrolling content padding-left-right-0 fullpage-top-6 padding-top-10">
    <h4 class="ui left floated modal-sub-header padding-left-25 custom-modal-subheader">Batch Detail</h4>
    <div class="ui clearing fullpage divider margin-bottom-50"></div>
    <form [formGroup]="batchUpdateForm" class="ui form batchUpdateForm padding-left-25 padding-right-25">
      <div class="one field" [ngClass]="batchUpdateForm.controls['name'].invalid && batchUpdateForm.controls['name'].errors.required && !batchUpdateForm.controls['name'].pristine ? 'error': ''">
        <div class="required field">
          <label>{{resourceService?.frmelmnts?.lbl?.batchname}}</label>
          <input type="text" name="name" formControlName="name">
        </div>
      </div>
      <div class="margin-top-0 margin-bottom-10 ui pointing red basic label below" *ngIf="batchUpdateForm.controls.name.invalid && batchUpdateForm.controls['name'].errors.required && !batchUpdateForm.controls['name'].pristine">
        {{resourceService?.messages?.stmsg?.m0112}}
      </div>
      <div class="one field">
        <div class="field">
          <label>{{resourceService?.frmelmnts?.lbl?.aboutbatch}}</label>
          <input type="text" name="description" formControlName="description">
        </div>
      </div>
      <div class="four fields">
        <div class="required field" [ngClass]="batchUpdateForm.controls['startDate'].invalid && batchUpdateForm.controls['startDate'].errors.required && !batchUpdateForm.controls['startDate'].pristine ? 'error': ''">
          <label>{{resourceService?.frmelmnts?.lbl?.startdate}}</label>
          <div class="ui read-only calendar rangestartAdd margin-bottom-10" id="rangestartAdd">
            <div class="ui input left icon">
              <i class="calendar icon date-calendar"></i>
              <input [attr.disabled]="batchDetails.status !== 0 ? true : null" [pickerMinDate]='batchDetails.status !== 0 ? batchUpdateForm.controls["startDate"].value : pickerMinDate'
                suiDatepicker formControlName="startDate" [pickerMode]="'date'">
            </div>
          </div>
          <div class="margin-top-0 margin-bottom-10 ui pointing red basic label below" *ngIf="batchUpdateForm.controls.startDate.invalid && batchUpdateForm.controls['startDate'].errors.required && !batchUpdateForm.controls['startDate'].pristine">
            {{resourceService?.messages?.stmsg?.m0113}}
          </div>
        </div>
        <div class="field">
          <label>{{resourceService?.frmelmnts?.lbl?.enddate}}</label>
          <div class="ui calendar rangeendAdd" id="rangeendAdd">
            <div class="ui input left icon">
              <i class="calendar icon date-calendar"></i>
              <input [attr.disabled]="batchDetails.status === 2 ? true : null" [pickerMinDate]='pickerMinDateForEndDate'
                suiDatepicker formControlName="endDate" [pickerMode]="'date'">
            </div>
          </div>
        </div>
      </div>
      <div class="fl batch-type-heading">{{resourceService?.frmelmnts?.lbl?.natureofbatch}} :
      </div>
      <div class="inline fields fl">
        <div class="grouped fields margin-left-10">
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" name="enrollmentType" value='invite-only' formControlName="enrollmentType">
              <label>Invite-only</label>
            </div>
          </div>
          <div class="field margin-top-10" *ngIf="courseCreator">
            <div class="field">
              <div class="ui radio checkbox">
                <input [attr.disabled]="batchDetails.status !== 0 ? true : null" type="radio" value='open' name="enrollmentType"
                  formControlName="enrollmentType">
                <label>Open</label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div *ngIf="stepNumber === 2" class="height-100">
    <app-add-batch-members [batchDetails]="batchDetails"></app-add-batch-members>
  </div>
  <div class="actions">
    <button appTelemetryInteract [telemetryInteractObject]="telemetryInteractObject" [telemetryInteractEdata]="updateInteractEdata"
      *ngIf="stepNumber !== 2" (click)="updateBatch()" class="ui left floated basic primary button" tabindex="0"
      [disabled]="disableSubmitBtn">UPDATE</button>
    <button appTelemetryInteract [telemetryInteractObject]="telemetryInteractObject" [telemetryInteractEdata]="addmemebersInteractEdata"
      *ngIf="stepNumber !== 2" class="ui primary button" id="submitbutton" [disabled]="disableSubmitBtn" tabindex="0"
      (click)="navigateToStep(2)">ADD MEMBERS</button>
    <button appTelemetryInteract [telemetryInteractObject]="telemetryInteractObject" [telemetryInteractEdata]="backInteractEdata"
      *ngIf="stepNumber !== 1" (click)="navigateToStep((+stepNumber - 1))" class="ui left floated basic primary button"
      tabindex="0">BACK</button>
    <button appTelemetryInteract [telemetryInteractObject]="telemetryInteractObject" [telemetryInteractEdata]="updateBatchInteractEdata"
      *ngIf="stepNumber !== 1" class="ui primary button" id="submitbutton" (click)="updateBatch()" tabindex="0">UPDATE
      BATCH</button>
  </div>
</sui-modal>