<sui-modal [mustScroll]="true" [isClosable]="true" [transitionDuration]="0" [size]="'fullscreen'" class="sb-modal sb-modal-fullscreen" 
  appBodyScroll (dismissed)="closeModal();" #userDetailsModal>
  <div class="sb-modal-header sb-bg-color-white px-24" *ngIf="formAction === 'submit'">
    {{resourceService?.frmelmnts?.lbl?.provideTeacherDetails}} </div>
  <div class="sb-modal-header sb-bg-color-white px-24" *ngIf="formAction === 'update'"> {{resourceService?.frmelmnts?.lbl?.updateDetails}}
  </div>
  <div class="sb-modal-content" *ngIf="showLoader">
   <app-loader></app-loader>
  </div>
  <div class="sb-modal-content" *ngIf="!showLoader">
    <!-- <div class="fs-1">{{resourceService?.frmelmnts?.lbl?.stateValidationDetails}}</div> -->
    <form class="sb-form px-24 py-16" [formGroup]="userDetailsForm">
      <div class="ui stackable grid" *ngFor="let field of formData">
        <div class="twelve wide column p-0 mb-8" *ngIf="field.code==='state' && field.visible===true">
          <div class="fields-selection p-0">
            <label class="font-weight-normal fnormal">{{field.label}}<span *ngIf="field.required">*</span></label>
            <div class="sb-field field-focus">
              <sui-select [isSearchable]="false" class="selection"
                [ngClass]="{'orange-border': userDetailsForm.controls[field.code].touched && userDetailsForm.controls[field.code].errors}"
                formControlName="{{field.code}}" [options]="allStates" labelField="name" name="code"
                placeholder="{{field.description}}" #stateDiv>
                <sui-select-option *ngFor="let state of stateDiv.filteredOptions | slice:0:100" [value]="state">
                </sui-select-option>
              </sui-select>
            </div>
          </div>
        </div>
        <div class="twelve wide column p-0 mb-8" *ngIf="field.code==='district' && field.visible===true">
          <div class="fields-selection p-0">
            <div class="ui segment width-100" *ngIf="showDistrictDivLoader">
              <div class="ui active inverted dimmer">
                <div class="ui mini text loader">{{resourceService?.messages?.stmsg?.m0130}}</div>
              </div>
            </div>
            <div *ngIf="!showDistrictDivLoader">
              <label
                *ngIf="!(userDetailsForm.controls[field.code].touched && userDetailsForm.controls[field.code].errors)"
                class="font-weight-normal fnormal">{{field.label}}<span *ngIf="field.required">*</span></label>
              <div class="sb-field field-focus">
                <sui-select [isSearchable]="false" class="selection"
                  [ngClass]="{'orange-border': userDetailsForm.controls[field.code].touched && userDetailsForm.controls[field.code].errors}"
                  formControlName="{{field.code}}" [options]="allDistricts" labelField="name" valueField="code"
                  name="code" placeholder="{{field.description}}" #districtDiv>
                  <sui-select-option *ngFor="let district of districtDiv.filteredOptions | slice:0:100"
                    [value]="district"></sui-select-option>
                </sui-select>
              </div>


              <label class="font-weight-normal orange text"
                *ngIf="userDetailsForm.controls[field.code].touched && userDetailsForm.controls[field.code].errors">
                {{ resourceService?.frmelmnts?.lbl?.requiredField | interpolate:'{field}': field.label }}
              </label>
              <div *ngFor="let validation of field.validation">
                <label class="font-weight-normal orange text"
                  *ngIf="validation.message && userDetailsForm.controls[field.code].errors && userDetailsForm.controls[field.code].errors[validation.type]">
                  {{ validation.message}}
                </label>
              </div>
            </div>
          </div>
        </div>
       <!-- <div class="twelve wide column p-0 mb-8">
          <div class="fields-selection p-0">
            <label class="font-weight-normal fnormal">Phone Number<span>*</span></label>
            <div class="sb-field field-focus">
              <input class="sb-form-control selection fields-dropdown ui dropdown" type="number"
                placeholder="Enter Phone Number">
              <div *ngFor="let validation of field.validation">
                <label class="font-weight-normal orange text"
                  *ngIf="validation.message && userDetailsForm.controls[field.code].errors && userDetailsForm.controls[field.code].errors[validation.type]">
                  please enter phone number
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="twelve wide column p-0 mb-8">
          <div class="fields-selection p-0">
            <label class="font-weight-normal fnormal">Email ID<span>*</span></label>
            <div class="sb-field field-focus">
              <input class="sb-form-control is-invalid selection fields-dropdown ui dropdown" type="text"
                placeholder="Enter Email ID">
              <span class="info-error-icon" (click)="showValidateMobileModal = !showValidateMobileModal">
                <img src="../../../../../assets/images/checkbox-icon.svg" width="24px" height="24px"></span>
            </div>
            <div>
              <label class="font-weight-normal invalid-msg">
                Entered email ID is incorrect
              </label> -->
              <!-- <label class="font-weight-normal invalid-msg">
                Please validate your email ID
              </label> -->
            <!-- </div>
          </div>
        </div>  -->

        <!-- OTP Modal for validate Phone NO. -->
      <!-- <sui-modal *ngIf="showSuccessModal" [mustScroll]="true" [isClosable]="true" [transitionDuration]="0"
          [size]="'normal'" class="sb-modal sb-primary" appBodyScroll
          (dismissed)="showValidateMobileModal = !showValidateMobileModal" #modal>
          <div class="sb-modal-header font-weight-normal">
            Validate phone number
          </div>
          <div class="sb-modal-content p-24">
            <p class="fs-1">You will receive an email with the OTP for Email ID verification</p>
            <div class="twelve wide column p-0">
              <div class="fields-selection p-0">
                <label class="font-weight-normal fnormal">Enter OTP</label>
                <div class="sb-field field-focus otp-field fsmall">
                  <input class="sb-form-control is-invalid selection fields-dropdown ui dropdown font-weight-bold" type="number"
                    placeholder="Enter OTP">
                  <div>
                    <label class="font-weight-normal primary text mt-8 mb-0">
                      Resend OTP
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="sb-modal-actions">
            <button class="sb-btn sb-btn-normal sb-btn-primary" (click)="showSuccessModal = !showSuccessModal">
              Submit
            </button>
          </div>
      </sui-modal>  -->

        <!-- success modal for submitting details -->
         <!-- <sui-modal *ngIf="showSuccessModal" [mustScroll]="true" [isClosable]="true" [transitionDuration]="0"
          [size]="'normal'" class="sb-modal sb-success" appBodyScroll
          (dismissed)="showSuccessModal = !showSuccessModal" #modal>
          <div class="sb-modal-header font-weight-normal">
            Thank you for submitting your details
          </div>
          <div class="sb-modal-content p-24 flex-ai-jc-center">
            <p class="fs-1">You can edit this information from your profile if you need to</p>
          </div>
          <div class="sb-modal-actions">
            <button class="sb-btn sb-btn-normal sb-btn-success" (click)="showSuccessModal = !showSuccessModal">
              OK
            </button>
          </div>
        </sui-modal>  -->

         <!-- <div class="d-flex flex-dc flex-jc-center flex-ai-center w-100">
          <button class="sb-btn sb-btn-secondary sb-btn-normal sb-btn-border">
            Validate</button>
        </div>  -->

        <div class="twelve wide column p-0 mb-8" *ngIf="field.inputType==='input' && field.visible===true">
          <div class="fields-selection p-0">
            <label
              *ngIf="!(userDetailsForm.controls[field.code].touched && userDetailsForm.controls[field.code].errors)"
              class="font-weight-normal fnormal">{{field.label}}<span *ngIf="field.required">*</span></label>
            <div class="sb-field field-focus">
              <input class="sb-form-control"
                [ngClass]="{'orange-border': userDetailsForm.controls[field.code].touched && userDetailsForm.controls[field.code].errors}"
                formControlName="{{field.code}}" type="text" name="code" placeholder="{{field.description}}">

              <div *ngFor="let validation of field.validation">
                <label class="font-weight-normal orange text"
                  *ngIf="validation.message && userDetailsForm.controls[field.code].errors && userDetailsForm.controls[field.code].errors[validation.type]">
                  {{ validation.message}}
                </label>
              </div>
            </div>
          </div>
        </div>

       <!-- <div class="twelve wide column p-0 pt-16 mx-16">
          <div class="sb-checkbox sb-checkbox-primary">
            <input type="checkbox" id="check1" name="example">
            <label for="check1">I agree to share these details with the Administrators of DIKSHA as per the
              <a class="text-underline" href="javascript:void(0)">Privacy Policy</a></label>
          </div>
        </div>  -->

      </div>
    </form>
  </div>
  <div class="sb-modal-actions">
    <button *ngIf="formAction === 'submit'" appTelemetryInteract [telemetryInteractEdata]="submitInteractEdata"
      [ngClass]="{'sb-btn-disabled': !enableSubmitBtn}" class="sb-btn sb-btn-normal sb-btn-primary"
      [disabled]="!enableSubmitBtn" (click)="onSubmitForm(); showEditModal = !showEditModal">
      {{resourceService?.frmelmnts?.btn?.submit}}
    </button>
    <button *ngIf="formAction === 'update'" appTelemetryInteract [telemetryInteractEdata]="getUpdateTelemetry()"
      [ngClass]="{'sb-btn-disabled': !enableSubmitBtn}" class="sb-btn sb-btn-normal sb-btn-primary"
      [disabled]="!enableSubmitBtn" (click)="onSubmitForm(); showEditModal = !showEditModal">
      {{resourceService?.frmelmnts?.btn?.update}}
    </button>
    <button (click)="closeModal();" appTelemetryInteract [telemetryInteractEdata]="cancelInteractEdata"
      class="sb-btn sb-btn-normal sb-btn-outline-primary">
      {{resourceService?.frmelmnts?.btn?.cancel}}
    </button>
  </div>
</sui-modal>
