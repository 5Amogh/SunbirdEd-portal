import { Component, EventEmitter, Output } from '@angular/core';
import { Validators } from '@angular/forms';
import * as i0 from "@angular/core";
import * as i1 from "../../services/uci.service";
import * as i2 from "@angular/forms";
import * as i3 from "../../services/uci-graph-ql.service";
import * as i4 from "@angular/common";
import * as i5 from "@project-sunbird/ng2-semantic-ui";
export class UserSegmentAddComponent {
    constructor(uciService, fb, uciGraphQlService) {
        this.uciService = uciService;
        this.fb = fb;
        this.uciGraphQlService = uciGraphQlService;
        this.cancel = new EventEmitter();
        this.add = new EventEmitter();
        this.userSegment = {};
        this.isLoaderShow = false;
        this.districts = [];
        this.blocks = [];
        this.schools = [];
        this.clusters = [];
        this.roles = [];
        this.boards = [];
        this.grade = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12];
        this.subjects = [];
        this.state = 'Haryana';
    }
    ngOnInit() {
        this.getUciDistrict();
        this.getUciRole();
        this.getUciBoard();
        this.userSegmentForm = this.fb.group({
            name: ['', Validators.required],
            description: [''],
            district: [''],
            block: [''],
            cluster: [''],
            school: [''],
            role: [''],
            board: [''],
            grade: [''],
            subject: ['']
        });
        this.userSegmentForm.get('district').valueChanges.subscribe(item => {
            if (item) {
                this.userSegmentForm.get('block').patchValue('');
                this.blocks = [];
                this.userSegmentForm.get('cluster').patchValue('');
                this.userSegmentForm.get('school').patchValue('');
                this.schools = [];
                this.clusters = [];
                this.getUciBlock();
            }
        });
        this.userSegmentForm.get('block').valueChanges.subscribe(item => {
            if (item) {
                this.userSegmentForm.get('cluster').patchValue('');
                this.userSegmentForm.get('school').patchValue('');
                this.schools = [];
                this.clusters = [];
                this.getUciCluster();
                this.getUciSchoolDetails();
            }
        });
    }
    onCancel() {
        this.cancel.emit(false);
    }
    onAdd() {
        if (this.userSegmentForm.invalid) {
            return;
        }
        this.isLoaderShow = true;
        const formValue = this.userSegmentForm.value;
        const locationData = [];
        const blockData = [];
        const districtData = [];
        for (const school of this.schools) {
            if (formValue.school.indexOf(school.school) !== -1) {
                locationData.push(school);
                if (blockData.indexOf(school.block) === -1) {
                    blockData.push(school.block);
                    districtData.push(school.district);
                }
            }
            if (locationData.length === formValue.school) {
                break;
            }
        }
        if (blockData.length < formValue.block.length) {
            for (const block of this.blocks) {
                if (formValue.block.indexOf(block.block) !== -1 && blockData.indexOf(block.block) === -1) {
                    locationData.push(block);
                    blockData.push(block.block);
                    districtData.push(block.district);
                }
                if (blockData.length === formValue.block) {
                    break;
                }
            }
        }
        if (districtData.length < formValue.district.length) {
            for (const district of this.districts) {
                if (formValue.district.indexOf(district.district) !== -1 && districtData.indexOf(district.district) === -1) {
                    locationData.push(district);
                }
            }
        }
        const param = {
            data: {
                userLocation: locationData,
                roles: formValue.role,
                userType: {
                    type: 'student'
                },
                framework: {
                    board: formValue.board,
                    gradeLevel: formValue.grade
                }
            }
        };
        this.uciService.userSegmentQueryBuilder(param).subscribe(response => {
            if (response) {
                const items = {
                    ...response,
                    name: formValue.name,
                    description: formValue.description
                };
                this.uciService.createUserSegment({ data: items }).subscribe((data) => {
                    this.isLoaderShow = false;
                    this.afterAdd(data.inserted);
                }, err => {
                    this.isLoaderShow = false;
                });
            }
        }, error => {
            this.isLoaderShow = false;
        });
    }
    afterAdd(data) {
        this.add.emit(data);
    }
    getUciState() {
        this.uciGraphQlService.getState().subscribe(res => {
        });
    }
    getUciDistrict() {
        const params = {
            state: this.state
        };
        this.uciGraphQlService.getDistrict(params).subscribe((res) => {
            this.districts = [];
            if (res && res.data && res.data.organisation && res.data.organisation.length) {
                this.districts = res.data.organisation;
            }
        });
    }
    getUciBlock() {
        const formVal = this.userSegmentForm.value;
        const params = {
            state: this.state, district: formVal.district
        };
        this.uciGraphQlService.getBlock(params).subscribe((res) => {
            this.blocks = [];
            if (res && res.data && res.data.blocks && res.data.blocks.length) {
                this.blocks = res.data.blocks;
            }
        });
    }
    getUciCluster() {
        const formVal = this.userSegmentForm.value;
        const params = {
            state: this.state, district: formVal.district, block: formVal.block
        };
        this.uciGraphQlService.getClusters(params).subscribe((res) => {
            this.clusters = [];
            if (res && res.data && res.data.clusters && res.data.clusters.length) {
                if (res.data.clusters[0].cluster) {
                    this.clusters = res.data.clusters;
                }
            }
        });
    }
    getUciSchoolDetails() {
        const formVal = this.userSegmentForm.value;
        const params = {
            state: this.state, district: formVal.district, block: formVal.block
        };
        this.uciGraphQlService.getSchoolDetails(params).subscribe((res) => {
            this.schools = [];
            if (res && res.data && res.data.schools && res.data.schools.length) {
                this.schools = res.data.schools;
            }
        });
    }
    getUciRole() {
        this.uciGraphQlService.getRole().subscribe((res) => {
            if (res && res.data && res.data.role && res.data.role.length) {
                this.roles = res.data.role;
            }
        });
    }
    getUciBoard() {
        this.uciGraphQlService.getBoards().subscribe((res) => {
            if (res && res.data && res.data.board && res.data.board.length) {
                this.boards = res.data.board;
            }
        });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: UserSegmentAddComponent, deps: [{ token: i1.UciService }, { token: i2.UntypedFormBuilder }, { token: i3.UciGraphQlService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: UserSegmentAddComponent, selector: "lib-user-segment-add", outputs: { cancel: "cancel", add: "add" }, ngImport: i0, template: "<div class=\"uci-add-segment\">\n    <div class=\"ui grid\">\n        <div class=\"nine wide column font-1-2 font-weight-bold\">\n            Create new segment\n        </div>\n        <div class=\"three wide column\">\n            <div class=\"right-floated pt-0\">\n                <button class=\"sb-btn sb-btn-normal sb-btn-outline-primary mr-10\" (click)=\"onCancel()\">\n                    Cancel\n                </button>\n                <ng-container *ngIf=\"isLoaderShow; else addBtn\">\n                    <button class=\"sb-btn sb-btn-normal sb-btn-primary p-0\">\n                        <div class=\"ui active tiny inline loader\"></div>\n                    </button>\n                </ng-container>\n                <ng-template #addBtn>\n                    <button class=\"sb-btn sb-btn-normal sb-btn-primary\" (click)=\"onAdd()\"\n                            [disabled]=\"userSegmentForm.invalid\">\n                        Add\n                    </button>\n                </ng-template>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"ten wide column font-1-2\">\n        <form class=\"ui form user-segment-form\" [formGroup]=\"userSegmentForm\">\n            <div class=\"field\">\n                <label>Name <sup><i class=\"asterisk icon asterisk-color\"></i></sup></label>\n                <input type=\"text\" name=\"name\" placeholder=\"Name\" formControlName=\"name\">\n            </div>\n            <div class=\"field\">\n                <label>Description</label>\n                <textarea name=\"description\" formControlName=\"description\" placeholder=\"Enter description\"></textarea>\n            </div>\n            <div class=\"ui divider mt-30\"></div>\n            <div class=\"two fields\">\n                <div class=\"field\">\n                    <label>District</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"district\"\n                                          [options]=\"districts\"\n                                          #multiSelectDistrict>\n                            <sui-select-option *ngFor=\"let option of multiSelectDistrict.filteredOptions\"\n                                               [value]=\"option.district\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n\n                </div>\n                <div class=\"field\">\n                    <label>Block</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"block\"\n                                          [options]=\"blocks\"\n                                          #multiSelectBlock>\n                            <sui-select-option *ngFor=\"let option of multiSelectBlock.filteredOptions\"\n                                               [value]=\"option.block\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n                </div>\n            </div>\n            <div class=\"two fields\">\n                <div class=\"field\" *ngIf=\"clusters.length\">\n                    <label>Cluster</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"cluster\"\n                                          [options]=\"clusters\"\n                                          #multiSelectCluster>\n                            <sui-select-option *ngFor=\"let option of multiSelectCluster.filteredOptions\"\n                                               [value]=\"option.cluster\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n                </div>\n                <div class=\"field\">\n                    <label>School</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"school\"\n                                          [options]=\"schools\"\n                                          #multiSelectSchool>\n                            <sui-select-option *ngFor=\"let option of multiSelectSchool.filteredOptions\"\n                                               [value]=\"option.school\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n                </div>\n            </div>\n            <div class=\"two fields\">\n                <div class=\"field\">\n                    <label>Role</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"role\"\n                                          [options]=\"roles\"\n                                          #multiSelectRole>\n                            <sui-select-option *ngFor=\"let option of multiSelectRole.filteredOptions\"\n                                               [value]=\"option.name\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n                </div>\n                <div class=\"field\">\n                    <label>Board</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"board\"\n                                          [options]=\"boards\"\n                                          #multiSelectBoard>\n                            <sui-select-option *ngFor=\"let option of multiSelectBoard.filteredOptions\"\n                                               [value]=\"option.name\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n                </div>\n            </div>\n            <div class=\"two fields\">\n                <div class=\"field\">\n                    <label>Grade</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"grade\"\n                                          [options]=\"grade\"\n                                          #multiSelectGrade>\n                            <sui-select-option *ngFor=\"let option of multiSelectGrade.filteredOptions\"\n                                               [value]=\"option\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n                </div>\n            </div>\n\n        </form>\n    </div>\n</div>\n", styles: [".font-1-2{font-size:1.2rem}.user-segment-form label{font-weight:400!important}.asterisk-color{color:red}button:disabled{background:#89cff0;border-color:#89cff0}\n"], dependencies: [{ kind: "directive", type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i2.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i2.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i2.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i2.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i2.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }, { kind: "directive", type: i5.SuiRadioManager, selector: "form:not([ngForm]):not([[ngForm]]),ngForm,[ngForm]" }, { kind: "component", type: i5.SuiSelectOption, selector: "sui-select-option", inputs: ["value"], outputs: ["onSelected"] }, { kind: "component", type: i5.SuiMultiSelect, selector: "sui-multi-select", inputs: ["hasLabels", "placeholder", "maxSelected", "zeroSelectionText", "defaultSelectionText"], outputs: ["selectedOptionsChange"] }, { kind: "directive", type: i5.SuiMultiSelectValueAccessor, selector: "sui-multi-select" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: UserSegmentAddComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-user-segment-add', template: "<div class=\"uci-add-segment\">\n    <div class=\"ui grid\">\n        <div class=\"nine wide column font-1-2 font-weight-bold\">\n            Create new segment\n        </div>\n        <div class=\"three wide column\">\n            <div class=\"right-floated pt-0\">\n                <button class=\"sb-btn sb-btn-normal sb-btn-outline-primary mr-10\" (click)=\"onCancel()\">\n                    Cancel\n                </button>\n                <ng-container *ngIf=\"isLoaderShow; else addBtn\">\n                    <button class=\"sb-btn sb-btn-normal sb-btn-primary p-0\">\n                        <div class=\"ui active tiny inline loader\"></div>\n                    </button>\n                </ng-container>\n                <ng-template #addBtn>\n                    <button class=\"sb-btn sb-btn-normal sb-btn-primary\" (click)=\"onAdd()\"\n                            [disabled]=\"userSegmentForm.invalid\">\n                        Add\n                    </button>\n                </ng-template>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"ten wide column font-1-2\">\n        <form class=\"ui form user-segment-form\" [formGroup]=\"userSegmentForm\">\n            <div class=\"field\">\n                <label>Name <sup><i class=\"asterisk icon asterisk-color\"></i></sup></label>\n                <input type=\"text\" name=\"name\" placeholder=\"Name\" formControlName=\"name\">\n            </div>\n            <div class=\"field\">\n                <label>Description</label>\n                <textarea name=\"description\" formControlName=\"description\" placeholder=\"Enter description\"></textarea>\n            </div>\n            <div class=\"ui divider mt-30\"></div>\n            <div class=\"two fields\">\n                <div class=\"field\">\n                    <label>District</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"district\"\n                                          [options]=\"districts\"\n                                          #multiSelectDistrict>\n                            <sui-select-option *ngFor=\"let option of multiSelectDistrict.filteredOptions\"\n                                               [value]=\"option.district\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n\n                </div>\n                <div class=\"field\">\n                    <label>Block</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"block\"\n                                          [options]=\"blocks\"\n                                          #multiSelectBlock>\n                            <sui-select-option *ngFor=\"let option of multiSelectBlock.filteredOptions\"\n                                               [value]=\"option.block\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n                </div>\n            </div>\n            <div class=\"two fields\">\n                <div class=\"field\" *ngIf=\"clusters.length\">\n                    <label>Cluster</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"cluster\"\n                                          [options]=\"clusters\"\n                                          #multiSelectCluster>\n                            <sui-select-option *ngFor=\"let option of multiSelectCluster.filteredOptions\"\n                                               [value]=\"option.cluster\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n                </div>\n                <div class=\"field\">\n                    <label>School</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"school\"\n                                          [options]=\"schools\"\n                                          #multiSelectSchool>\n                            <sui-select-option *ngFor=\"let option of multiSelectSchool.filteredOptions\"\n                                               [value]=\"option.school\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n                </div>\n            </div>\n            <div class=\"two fields\">\n                <div class=\"field\">\n                    <label>Role</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"role\"\n                                          [options]=\"roles\"\n                                          #multiSelectRole>\n                            <sui-select-option *ngFor=\"let option of multiSelectRole.filteredOptions\"\n                                               [value]=\"option.name\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n                </div>\n                <div class=\"field\">\n                    <label>Board</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"board\"\n                                          [options]=\"boards\"\n                                          #multiSelectBoard>\n                            <sui-select-option *ngFor=\"let option of multiSelectBoard.filteredOptions\"\n                                               [value]=\"option.name\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n                </div>\n            </div>\n            <div class=\"two fields\">\n                <div class=\"field\">\n                    <label>Grade</label>\n                    <div class=\"ui segment p-0\">\n                        <sui-multi-select class=\"selection w-100\"\n                                          formControlName=\"grade\"\n                                          [options]=\"grade\"\n                                          #multiSelectGrade>\n                            <sui-select-option *ngFor=\"let option of multiSelectGrade.filteredOptions\"\n                                               [value]=\"option\">\n                            </sui-select-option>\n                        </sui-multi-select>\n                    </div>\n                </div>\n            </div>\n\n        </form>\n    </div>\n</div>\n", styles: [".font-1-2{font-size:1.2rem}.user-segment-form label{font-weight:400!important}.asterisk-color{color:red}button:disabled{background:#89cff0;border-color:#89cff0}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.UciService }, { type: i2.UntypedFormBuilder }, { type: i3.UciGraphQlService }]; }, propDecorators: { cancel: [{
                type: Output
            }], add: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci1zZWdtZW50LWFkZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91Y2ktY29uc29sZS9zcmMvbGliL2NvbXBvbmVudHMvdXNlci1zZWdtZW50LWFkZC91c2VyLXNlZ21lbnQtYWRkLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VjaS1jb25zb2xlL3NyYy9saWIvY29tcG9uZW50cy91c2VyLXNlZ21lbnQtYWRkL3VzZXItc2VnbWVudC1hZGQuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxZQUFZLEVBQVUsTUFBTSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBR3RFLE9BQU8sRUFBdUMsVUFBVSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7Ozs7Ozs7QUFPaEYsTUFBTSxPQUFPLHVCQUF1QjtJQWlCaEMsWUFBb0IsVUFBc0IsRUFDdEIsRUFBc0IsRUFDdEIsaUJBQW9DO1FBRnBDLGVBQVUsR0FBVixVQUFVLENBQVk7UUFDdEIsT0FBRSxHQUFGLEVBQUUsQ0FBb0I7UUFDdEIsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFtQjtRQWxCOUMsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFXLENBQUM7UUFDckMsUUFBRyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFFeEMsZ0JBQVcsR0FBUSxFQUFFLENBQUM7UUFDdEIsaUJBQVksR0FBRyxLQUFLLENBQUM7UUFDckIsY0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNmLFdBQU0sR0FBRyxFQUFFLENBQUM7UUFDWixZQUFPLEdBQUcsRUFBRSxDQUFDO1FBQ2IsYUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNkLFVBQUssR0FBRyxFQUFFLENBQUM7UUFDWCxXQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ1osVUFBSyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxD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QUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO2FBQzlCO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsV0FBVztRQUNQLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFRLEVBQUUsRUFBRTtZQUN0RCxJQUFJLEdBQUcsSUFBSSxHQUFHLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRTtnQkFDNUQsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQzthQUNoQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQzsrR0F6TlEsdUJBQXVCO21HQUF2Qix1QkFBdUIsdUdDVnBDLGk5TkE0SUE7OzRGRGxJYSx1QkFBdUI7a0JBTG5DLFNBQVM7K0JBQ0ksc0JBQXNCO2tLQUt0QixNQUFNO3NCQUFmLE1BQU07Z0JBQ0csR0FBRztzQkFBWixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgT25Jbml0LCBPdXRwdXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtVY2lTZXJ2aWNlfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy91Y2kuc2VydmljZSc7XG5pbXBvcnQge1VjaUdyYXBoUWxTZXJ2aWNlfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy91Y2ktZ3JhcGgtcWwuc2VydmljZSc7XG5pbXBvcnQge1VudHlwZWRGb3JtQnVpbGRlciwgVW50eXBlZEZvcm1Hcm91cCwgVmFsaWRhdG9yc30gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2xpYi11c2VyLXNlZ21lbnQtYWRkJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vdXNlci1zZWdtZW50LWFkZC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vdXNlci1zZWdtZW50LWFkZC5jb21wb25lbnQuY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgVXNlclNlZ21lbnRBZGRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAgIEBPdXRwdXQoKSBjYW5jZWwgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7XG4gICAgQE91dHB1dCgpIGFkZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICAgIGZvcm1GaWVsZFByb3BlcnRpZXM6IEFycmF5PGFueT47XG4gICAgdXNlclNlZ21lbnQ6IGFueSA9IHt9O1xuICAgIGlzTG9hZGVyU2hvdyA9IGZhbHNlO1xuICAgIGRpc3RyaWN0cyA9IFtdO1xuICAgIGJsb2NrcyA9IFtdO1xuICAgIHNjaG9vbHMgPSBbXTtcbiAgICBjbHVzdGVycyA9IFtdO1xuICAgIHJvbGVzID0gW107XG4gICAgYm9hcmRzID0gW107XG4gICAgZ3JhZGUgPSBbMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDEyXTtcbiAgICBzdWJqZWN0cyA9IFtdO1xuICAgIHVzZXJTZWdtZW50Rm9ybTogVW50eXBlZEZvcm1Hcm91cDtcbiAgICBzdGF0ZSA9ICdIYXJ5YW5hJztcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgdWNpU2VydmljZTogVWNpU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGZiOiBVbnR5cGVkRm9ybUJ1aWxkZXIsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSB1Y2lHcmFwaFFsU2VydmljZTogVWNpR3JhcGhRbFNlcnZpY2UpIHtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5nZXRVY2lEaXN0cmljdCgpO1xuICAgICAgICB0aGlzLmdldFVjaVJvbGUoKTtcbiAgICAgICAgdGhpcy5nZXRVY2lCb2FyZCgpO1xuICAgICAgICB0aGlzLnVzZXJTZWdtZW50Rm9ybSA9IHRoaXMuZmIuZ3JvdXAoe1xuICAgICAgICAgICAgbmFtZTogWycnLCBWYWxpZGF0b3JzLnJlcXVpcmVkXSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBbJyddLFxuICAgICAgICAgICAgZGlzdHJpY3Q6IFsnJ10sXG4gICAgICAgICAgICBibG9jazogWycnXSxcbiAgICAgICAgICAgIGNsdXN0ZXI6IFsnJ10sXG4gICAgICAgICAgICBzY2hvb2w6IFsnJ10sXG4gICAgICAgICAgICByb2xlOiBbJyddLFxuICAgICAgICAgICAgYm9hcmQ6IFsnJ10sXG4gICAgICAgICAgICBncmFkZTogWycnXSxcbiAgICAgICAgICAgIHN1YmplY3Q6IFsnJ11cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy51c2VyU2VnbWVudEZvcm0uZ2V0KCdkaXN0cmljdCcpLnZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUoaXRlbSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXNlclNlZ21lbnRGb3JtLmdldCgnYmxvY2snKS5wYXRjaFZhbHVlKCcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMudXNlclNlZ21lbnRGb3JtLmdldCgnY2x1c3RlcicpLnBhdGNoVmFsdWUoJycpO1xuICAgICAgICAgICAgICAgIHRoaXMudXNlclNlZ21lbnRGb3JtLmdldCgnc2Nob29sJykucGF0Y2hWYWx1ZSgnJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2hvb2xzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5jbHVzdGVycyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0VWNpQmxvY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXNlclNlZ21lbnRGb3JtLmdldCgnYmxvY2snKS52YWx1ZUNoYW5nZXMuc3Vic2NyaWJlKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJTZWdtZW50Rm9ybS5nZXQoJ2NsdXN0ZXInKS5wYXRjaFZhbHVlKCcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJTZWdtZW50Rm9ybS5nZXQoJ3NjaG9vbCcpLnBhdGNoVmFsdWUoJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nob29scyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuY2x1c3RlcnMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFVjaUNsdXN0ZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFVjaVNjaG9vbERldGFpbHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25DYW5jZWwoKSB7XG4gICAgICAgIHRoaXMuY2FuY2VsLmVtaXQoZmFsc2UpO1xuICAgIH1cblxuICAgIG9uQWRkKCkge1xuICAgICAgICBpZiAodGhpcy51c2VyU2VnbWVudEZvcm0uaW52YWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNMb2FkZXJTaG93ID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgZm9ybVZhbHVlID0gdGhpcy51c2VyU2VnbWVudEZvcm0udmFsdWU7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uRGF0YSA9IFtdO1xuICAgICAgICBjb25zdCBibG9ja0RhdGEgPSBbXTtcbiAgICAgICAgY29uc3QgZGlzdHJpY3REYXRhID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc2Nob29sIG9mIHRoaXMuc2Nob29scykge1xuICAgICAgICAgICAgaWYgKGZvcm1WYWx1ZS5zY2hvb2wuaW5kZXhPZihzY2hvb2wuc2Nob29sKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbkRhdGEucHVzaChzY2hvb2wpO1xuICAgICAgICAgICAgICAgIGlmIChibG9ja0RhdGEuaW5kZXhPZihzY2hvb2wuYmxvY2spID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja0RhdGEucHVzaChzY2hvb2wuYmxvY2spO1xuICAgICAgICAgICAgICAgICAgICBkaXN0cmljdERhdGEucHVzaChzY2hvb2wuZGlzdHJpY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsb2NhdGlvbkRhdGEubGVuZ3RoID09PSBmb3JtVmFsdWUuc2Nob29sKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJsb2NrRGF0YS5sZW5ndGggPCBmb3JtVmFsdWUuYmxvY2subGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGJsb2NrIG9mIHRoaXMuYmxvY2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcm1WYWx1ZS5ibG9jay5pbmRleE9mKGJsb2NrLmJsb2NrKSAhPT0gLTEgJiYgYmxvY2tEYXRhLmluZGV4T2YoYmxvY2suYmxvY2spID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbkRhdGEucHVzaChibG9jayk7XG4gICAgICAgICAgICAgICAgICAgIGJsb2NrRGF0YS5wdXNoKGJsb2NrLmJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzdHJpY3REYXRhLnB1c2goYmxvY2suZGlzdHJpY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYmxvY2tEYXRhLmxlbmd0aCA9PT0gZm9ybVZhbHVlLmJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlzdHJpY3REYXRhLmxlbmd0aCA8IGZvcm1WYWx1ZS5kaXN0cmljdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGlzdHJpY3Qgb2YgdGhpcy5kaXN0cmljdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm9ybVZhbHVlLmRpc3RyaWN0LmluZGV4T2YoZGlzdHJpY3QuZGlzdHJpY3QpICE9PSAtMSAmJiBkaXN0cmljdERhdGEuaW5kZXhPZihkaXN0cmljdC5kaXN0cmljdCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uRGF0YS5wdXNoKGRpc3RyaWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW0gPSB7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgdXNlckxvY2F0aW9uOiBsb2NhdGlvbkRhdGEsXG4gICAgICAgICAgICAgICAgcm9sZXM6IGZvcm1WYWx1ZS5yb2xlLFxuICAgICAgICAgICAgICAgIHVzZXJUeXBlOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdHVkZW50J1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnJhbWV3b3JrOiB7XG4gICAgICAgICAgICAgICAgICAgIGJvYXJkOiBmb3JtVmFsdWUuYm9hcmQsXG4gICAgICAgICAgICAgICAgICAgIGdyYWRlTGV2ZWw6IGZvcm1WYWx1ZS5ncmFkZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnVjaVNlcnZpY2UudXNlclNlZ21lbnRRdWVyeUJ1aWxkZXIocGFyYW0pLnN1YnNjcmliZShyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGZvcm1WYWx1ZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZm9ybVZhbHVlLmRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnVjaVNlcnZpY2UuY3JlYXRlVXNlclNlZ21lbnQoe2RhdGE6IGl0ZW1zfSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgICAgICAoZGF0YTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGVyU2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZnRlckFkZChkYXRhLmluc2VydGVkKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkZXJTaG93ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzTG9hZGVyU2hvdyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZnRlckFkZChkYXRhKSB7XG4gICAgICAgIHRoaXMuYWRkLmVtaXQoZGF0YSk7XG4gICAgfVxuXG4gICAgZ2V0VWNpU3RhdGUoKSB7XG4gICAgICAgIHRoaXMudWNpR3JhcGhRbFNlcnZpY2UuZ2V0U3RhdGUoKS5zdWJzY3JpYmUocmVzID0+IHtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0VWNpRGlzdHJpY3QoKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudWNpR3JhcGhRbFNlcnZpY2UuZ2V0RGlzdHJpY3QocGFyYW1zKS5zdWJzY3JpYmUoKHJlczogYW55KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpc3RyaWN0cyA9IFtdO1xuICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSAmJiByZXMuZGF0YS5vcmdhbmlzYXRpb24gJiYgcmVzLmRhdGEub3JnYW5pc2F0aW9uLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzdHJpY3RzID0gcmVzLmRhdGEub3JnYW5pc2F0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRVY2lCbG9jaygpIHtcbiAgICAgICAgY29uc3QgZm9ybVZhbCA9IHRoaXMudXNlclNlZ21lbnRGb3JtLnZhbHVlO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSwgZGlzdHJpY3Q6IGZvcm1WYWwuZGlzdHJpY3RcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51Y2lHcmFwaFFsU2VydmljZS5nZXRCbG9jayhwYXJhbXMpLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tzID0gW107XG4gICAgICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhICYmIHJlcy5kYXRhLmJsb2NrcyAmJiByZXMuZGF0YS5ibG9ja3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ibG9ja3MgPSByZXMuZGF0YS5ibG9ja3M7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFVjaUNsdXN0ZXIoKSB7XG4gICAgICAgIGNvbnN0IGZvcm1WYWwgPSB0aGlzLnVzZXJTZWdtZW50Rm9ybS52YWx1ZTtcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsIGRpc3RyaWN0OiBmb3JtVmFsLmRpc3RyaWN0LCBibG9jazogZm9ybVZhbC5ibG9ja1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVjaUdyYXBoUWxTZXJ2aWNlLmdldENsdXN0ZXJzKHBhcmFtcykuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbHVzdGVycyA9IFtdO1xuICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSAmJiByZXMuZGF0YS5jbHVzdGVycyAmJiByZXMuZGF0YS5jbHVzdGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY2x1c3RlcnNbMF0uY2x1c3Rlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsdXN0ZXJzID0gcmVzLmRhdGEuY2x1c3RlcnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRVY2lTY2hvb2xEZXRhaWxzKCkge1xuICAgICAgICBjb25zdCBmb3JtVmFsID0gdGhpcy51c2VyU2VnbWVudEZvcm0udmFsdWU7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLCBkaXN0cmljdDogZm9ybVZhbC5kaXN0cmljdCwgYmxvY2s6IGZvcm1WYWwuYmxvY2tcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51Y2lHcmFwaFFsU2VydmljZS5nZXRTY2hvb2xEZXRhaWxzKHBhcmFtcykuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zY2hvb2xzID0gW107XG4gICAgICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhICYmIHJlcy5kYXRhLnNjaG9vbHMgJiYgcmVzLmRhdGEuc2Nob29scy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjaG9vbHMgPSByZXMuZGF0YS5zY2hvb2xzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRVY2lSb2xlKCkge1xuICAgICAgICB0aGlzLnVjaUdyYXBoUWxTZXJ2aWNlLmdldFJvbGUoKS5zdWJzY3JpYmUoKHJlczogYW55KSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhICYmIHJlcy5kYXRhLnJvbGUgJiYgcmVzLmRhdGEucm9sZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvbGVzID0gcmVzLmRhdGEucm9sZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0VWNpQm9hcmQoKSB7XG4gICAgICAgIHRoaXMudWNpR3JhcGhRbFNlcnZpY2UuZ2V0Qm9hcmRzKCkuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSAmJiByZXMuZGF0YS5ib2FyZCAmJiByZXMuZGF0YS5ib2FyZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkcyA9IHJlcy5kYXRhLmJvYXJkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwidWNpLWFkZC1zZWdtZW50XCI+XG4gICAgPGRpdiBjbGFzcz1cInVpIGdyaWRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm5pbmUgd2lkZSBjb2x1bW4gZm9udC0xLTIgZm9udC13ZWlnaHQtYm9sZFwiPlxuICAgICAgICAgICAgQ3JlYXRlIG5ldyBzZWdtZW50XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGhyZWUgd2lkZSBjb2x1bW5cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyaWdodC1mbG9hdGVkIHB0LTBcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwic2ItYnRuIHNiLWJ0bi1ub3JtYWwgc2ItYnRuLW91dGxpbmUtcHJpbWFyeSBtci0xMFwiIChjbGljayk9XCJvbkNhbmNlbCgpXCI+XG4gICAgICAgICAgICAgICAgICAgIENhbmNlbFxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJpc0xvYWRlclNob3c7IGVsc2UgYWRkQnRuXCI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJzYi1idG4gc2ItYnRuLW5vcm1hbCBzYi1idG4tcHJpbWFyeSBwLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1aSBhY3RpdmUgdGlueSBpbmxpbmUgbG9hZGVyXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjYWRkQnRuPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwic2ItYnRuIHNiLWJ0bi1ub3JtYWwgc2ItYnRuLXByaW1hcnlcIiAoY2xpY2spPVwib25BZGQoKVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cInVzZXJTZWdtZW50Rm9ybS5pbnZhbGlkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBBZGRcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJ0ZW4gd2lkZSBjb2x1bW4gZm9udC0xLTJcIj5cbiAgICAgICAgPGZvcm0gY2xhc3M9XCJ1aSBmb3JtIHVzZXItc2VnbWVudC1mb3JtXCIgW2Zvcm1Hcm91cF09XCJ1c2VyU2VnbWVudEZvcm1cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmaWVsZFwiPlxuICAgICAgICAgICAgICAgIDxsYWJlbD5OYW1lIDxzdXA+PGkgY2xhc3M9XCJhc3RlcmlzayBpY29uIGFzdGVyaXNrLWNvbG9yXCI+PC9pPjwvc3VwPjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cIm5hbWVcIiBwbGFjZWhvbGRlcj1cIk5hbWVcIiBmb3JtQ29udHJvbE5hbWU9XCJuYW1lXCI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmaWVsZFwiPlxuICAgICAgICAgICAgICAgIDxsYWJlbD5EZXNjcmlwdGlvbjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPHRleHRhcmVhIG5hbWU9XCJkZXNjcmlwdGlvblwiIGZvcm1Db250cm9sTmFtZT1cImRlc2NyaXB0aW9uXCIgcGxhY2Vob2xkZXI9XCJFbnRlciBkZXNjcmlwdGlvblwiPjwvdGV4dGFyZWE+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1aSBkaXZpZGVyIG10LTMwXCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHdvIGZpZWxkc1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmaWVsZFwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+RGlzdHJpY3Q8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidWkgc2VnbWVudCBwLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdWktbXVsdGktc2VsZWN0IGNsYXNzPVwic2VsZWN0aW9uIHctMTAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Db250cm9sTmFtZT1cImRpc3RyaWN0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtvcHRpb25zXT1cImRpc3RyaWN0c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjbXVsdGlTZWxlY3REaXN0cmljdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3VpLXNlbGVjdC1vcHRpb24gKm5nRm9yPVwibGV0IG9wdGlvbiBvZiBtdWx0aVNlbGVjdERpc3RyaWN0LmZpbHRlcmVkT3B0aW9uc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJvcHRpb24uZGlzdHJpY3RcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N1aS1zZWxlY3Qtb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdWktbXVsdGktc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmaWVsZFwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+QmxvY2s8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidWkgc2VnbWVudCBwLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdWktbXVsdGktc2VsZWN0IGNsYXNzPVwic2VsZWN0aW9uIHctMTAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Db250cm9sTmFtZT1cImJsb2NrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtvcHRpb25zXT1cImJsb2Nrc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjbXVsdGlTZWxlY3RCbG9jaz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3VpLXNlbGVjdC1vcHRpb24gKm5nRm9yPVwibGV0IG9wdGlvbiBvZiBtdWx0aVNlbGVjdEJsb2NrLmZpbHRlcmVkT3B0aW9uc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJvcHRpb24uYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N1aS1zZWxlY3Qtb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdWktbXVsdGktc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInR3byBmaWVsZHNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmllbGRcIiAqbmdJZj1cImNsdXN0ZXJzLmxlbmd0aFwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+Q2x1c3RlcjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1aSBzZWdtZW50IHAtMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN1aS1tdWx0aS1zZWxlY3QgY2xhc3M9XCJzZWxlY3Rpb24gdy0xMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiY2x1c3RlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbb3B0aW9uc109XCJjbHVzdGVyc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjbXVsdGlTZWxlY3RDbHVzdGVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdWktc2VsZWN0LW9wdGlvbiAqbmdGb3I9XCJsZXQgb3B0aW9uIG9mIG11bHRpU2VsZWN0Q2x1c3Rlci5maWx0ZXJlZE9wdGlvbnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdmFsdWVdPVwib3B0aW9uLmNsdXN0ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N1aS1zZWxlY3Qtb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdWktbXVsdGktc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmllbGRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlNjaG9vbDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1aSBzZWdtZW50IHAtMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN1aS1tdWx0aS1zZWxlY3QgY2xhc3M9XCJzZWxlY3Rpb24gdy0xMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwic2Nob29sXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtvcHRpb25zXT1cInNjaG9vbHNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI211bHRpU2VsZWN0U2Nob29sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdWktc2VsZWN0LW9wdGlvbiAqbmdGb3I9XCJsZXQgb3B0aW9uIG9mIG11bHRpU2VsZWN0U2Nob29sLmZpbHRlcmVkT3B0aW9uc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJvcHRpb24uc2Nob29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdWktc2VsZWN0LW9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3VpLW11bHRpLXNlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0d28gZmllbGRzXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZpZWxkXCI+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Sb2xlPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVpIHNlZ21lbnQgcC0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3VpLW11bHRpLXNlbGVjdCBjbGFzcz1cInNlbGVjdGlvbiB3LTEwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJyb2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtvcHRpb25zXT1cInJvbGVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNtdWx0aVNlbGVjdFJvbGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN1aS1zZWxlY3Qtb3B0aW9uICpuZ0Zvcj1cImxldCBvcHRpb24gb2YgbXVsdGlTZWxlY3RSb2xlLmZpbHRlcmVkT3B0aW9uc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJvcHRpb24ubmFtZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3VpLXNlbGVjdC1vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N1aS1tdWx0aS1zZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmaWVsZFwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+Qm9hcmQ8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidWkgc2VnbWVudCBwLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdWktbXVsdGktc2VsZWN0IGNsYXNzPVwic2VsZWN0aW9uIHctMTAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Db250cm9sTmFtZT1cImJvYXJkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtvcHRpb25zXT1cImJvYXJkc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjbXVsdGlTZWxlY3RCb2FyZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3VpLXNlbGVjdC1vcHRpb24gKm5nRm9yPVwibGV0IG9wdGlvbiBvZiBtdWx0aVNlbGVjdEJvYXJkLmZpbHRlcmVkT3B0aW9uc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJvcHRpb24ubmFtZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3VpLXNlbGVjdC1vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N1aS1tdWx0aS1zZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidHdvIGZpZWxkc1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmaWVsZFwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+R3JhZGU8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidWkgc2VnbWVudCBwLTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdWktbXVsdGktc2VsZWN0IGNsYXNzPVwic2VsZWN0aW9uIHctMTAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Db250cm9sTmFtZT1cImdyYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtvcHRpb25zXT1cImdyYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNtdWx0aVNlbGVjdEdyYWRlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdWktc2VsZWN0LW9wdGlvbiAqbmdGb3I9XCJsZXQgb3B0aW9uIG9mIG11bHRpU2VsZWN0R3JhZGUuZmlsdGVyZWRPcHRpb25zXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3ZhbHVlXT1cIm9wdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3VpLXNlbGVjdC1vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N1aS1tdWx0aS1zZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPC9mb3JtPlxuICAgIDwvZGl2PlxuPC9kaXY+XG4iXX0=