import { Component } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "../../services/uci.service";
import * as i2 from "@angular/router";
import * as i3 from "../../services/global.service";
import * as i4 from "@angular/common";
import * as i5 from "@angular/forms";
import * as i6 from "@project-sunbird/ng2-semantic-ui";
export class ConversationListComponent {
    constructor(uciService, router, globalService) {
        this.uciService = uciService;
        this.router = router;
        this.globalService = globalService;
        this.chatBots = [];
        this.pager = {
            totalItems: 0,
            currentPage: 1,
            pageSize: 10,
            totalPages: 0,
            startPage: 0,
            endPage: 0,
            startIndex: 0,
            endIndex: 0,
            pages: []
        };
        this.pageNumber = 1;
        this.column = '';
        this.sortDirection = '';
        this.reverse = false;
    }
    ngOnInit() {
        this.user = this.globalService.getUser();
        if (!this.user) {
            this.router.navigate(['uci-admin']);
            return;
        }
        this.getAllChatBots();
    }
    getAllChatBots() {
        const param = {
            page: this.pager.currentPage,
            perPage: this.pager.pageSize
        };
        if (this.search) {
            param.name = this.search;
            this.uciService.searchConversation(param).subscribe(data => this.parseConversations(data));
        }
        else {
            this.uciService.fetchConversation(param).subscribe(data => this.parseConversations(data));
        }
    }
    parseConversations(data) {
        this.chatBots = [];
        data.data.forEach(bot => {
            const obj = { ...bot, segmentText: '', userCount: 0, status: bot.status || 'Draft' };
            obj.status = bot.status === 'enabled' ? 'Live' : bot.status === 'disabled' ? 'Disabled' : 'Draft';
            const segmentNames = [];
            bot.userSegments.forEach(userSegment => {
                segmentNames.push(userSegment.name);
                obj.userCount += (userSegment.count || 0);
            });
            obj.segmentText = segmentNames.join(', ');
            this.chatBots.push(obj);
        });
        this.pager.totalItems = data.total;
        this.pager.totalPages = Math.ceil(data.total / this.pager.pageSize);
        this.pager.pages = [];
        let i = 1;
        while (i <= Math.ceil(data.total / this.pager.pageSize)) {
            this.pager.pages.push(i);
            i++;
        }
    }
    sortColumns(column) {
        this.column = column;
        this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';
        this.reverse = !this.reverse;
    }
    navigateToPage(page) {
        if (page < 1 || page > this.pager.totalPages) {
            return;
        }
        this.pageNumber = page;
        this.pager.currentPage = page;
        this.getAllChatBots();
    }
    getSearch() {
        this.getAllChatBots();
    }
    onAddNew() {
        this.router.navigateByUrl('uci-admin/add');
    }
    onEdit(conversation) {
        this.router.navigateByUrl(`uci-admin/${conversation.id}/edit`);
    }
    onStatusChange(conversation, index) {
        if (conversation.status === 'Live') {
            this.uciService.pauseConversation(conversation.id).subscribe(data => {
                this.chatBots[index].status = 'Disabled';
            });
        }
        else {
            this.uciService.startConversation(conversation.id).subscribe(data => {
                this.chatBots[index].status = 'Live';
            });
        }
    }
    onDelete(conversation, index) {
        this.uciService.deleteConversation(conversation.id).subscribe(data => {
            this.chatBots.splice(index, 1);
        });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: ConversationListComponent, deps: [{ token: i1.UciService }, { token: i2.Router }, { token: i3.GlobalService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: ConversationListComponent, selector: "lib-conversation-list", ngImport: i0, template: "<div class=\"uci-container\">\n    <div class=\"ui grid\">\n        <div class=\"ten wide column\">\n            <div class=\"sb-search-box b-0 ml-0 large\">\n                <div class=\"input-div relative\" id=\"search-input-container\">\n                    <img alt=\"Search Icon\" class=\"search icon\" src=\"assets/images/search-icon.svg\">\n                    <input class=\"sb-search-input disabled ng-untouched ng-pristine\" id=\"keyword\" name=\"filter_search\"\n                           [(ngModel)]=\"search\" type=\"text\" placeholder=\"Search\">\n                </div>\n                <button class=\"sb-btn sb-btn-normal disabled\" (click)=\"getSearch()\">Search</button>\n            </div>\n\n        </div>\n        <div class=\"two wide column\">\n            <div class=\"pb-10\">\n                <div class=\"right-floated pt-0\">\n                    <button class=\"sb-btn sb-btn-normal sb-btn-primary\" (click)=\"onAddNew()\"> Add New</button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <table class=\"ui single line upForReviewTable table\">\n        <thead>\n        <tr>\n            <th class=\"three wide UpReviewTableHeader sorted bl-0\">\n                Name\n            </th>\n            <th class=\"one wide UpReviewTableHeader sorted bl-0\">\n                Status\n            </th>\n            <th class=\"four wide UpReviewTableHeader sorted bl-0\">\n                Description\n            </th>\n            <th class=\"two wide UpReviewTableHeader sorted bl-0\">\n                Starting Message\n            </th>\n            <th class=\"one wide UpReviewTableHeader sorted bl-0\">\n                User Count\n            </th>\n            <th class=\"one wide UpReviewTableHeader sorted bl-0 center aligned\">\n                Action\n            </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr class=\"UpForReviewListHover\" *ngFor=\"let content of chatBots; let i = index;\">\n            <td>{{content.name}}</td>\n            <td [ngClass]=\"'status-' + (content.status ? content.status.toLowerCase(): '')\">{{content.status}}</td>\n            <td>{{content?.description}}</td>\n            <td>{{content.startingMessage}}</td>\n            <td class=\"center aligned\">{{content.userCount}}</td>\n            <td class=\"center aligned\">\n                <div class=\"ui dropdown\" suiDropdown>\n                    <i class=\"ellipsis vertical icon ellipsis-icon dropdown\"></i>\n                    <div class=\"menu\" suiDropdownMenu>\n                        <div class=\"item\" (click)=\"onEdit(content)\">Edit</div>\n                        <div class=\"item\" (click)=\"onDelete(content, i)\">Delete</div>\n                        <div class=\"item\" (click)=\"onStatusChange(content, i)\">{{content.status === 'Live' ? 'Disable' : 'Enable'}}</div>\n                    </div>\n                </div>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n    <div class=\"ui grid\">\n        <div class=\"two wide column\"></div>\n        <div class=\"ten wide column\">\n            <div class=\"pb-10\">\n                <div class=\"ui pagination menu mt-10 right-floated pt-0\" *ngIf=\"pager.pages\">\n                    <a [ngClass]=\"{disabled:pager.currentPage===1 }\" class=\"item \"\n                       (click)=\"navigateToPage(1) \">First</a>\n                    <a [ngClass]=\"{disabled:pager.currentPage===1 }\" class=\"item \"\n                       (click)=\"navigateToPage(pager.currentPage - 1)\">Previous</a>\n                    <a *ngFor=\"let page of pager.pages\" [ngClass]=\"{active:pager.currentPage===page}\"\n                       (click)=\"navigateToPage(page)\" class=\"item\">{{page}}</a>\n                    <a [ngClass]=\"{disabled:pager.currentPage=== pager.totalPages}\"\n                       (click)=\"navigateToPage(pager.currentPage + 1)\" class=\"item\">Next</a>\n                    <a [ngClass]=\"{disabled:pager.currentPage=== pager.totalPages}\"\n                       (click)=\"navigateToPage(pager.totalPages)\" class=\"item \">Last</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n", styles: [".ellipsis-icon{font-size:1.2rem}.status-live{color:#3c763d}.status-draft{color:#ffb300}.status-disabled{color:#ff4a2f}.action-dropdown{top:2px;left:-56px;z-index:2;position:absolute}.action-dropdown .item{cursor:pointer}.action-dropdown .item:hover{background-color:#f6f6f6}\n"], dependencies: [{ kind: "directive", type: i4.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i5.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i5.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i5.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "directive", type: i6.SuiDropdown, selector: "[suiDropdown]", inputs: ["isOpen", "isDisabled", "tabindex", "autoClose"], outputs: ["isOpenChange"] }, { kind: "directive", type: i6.SuiDropdownMenu, selector: "[suiDropdownMenu]", inputs: ["menuTransition", "menuTransitionDuration", "menuAutoSelectFirst", "menuSelectedItemClass"] }, { kind: "directive", type: i6.SuiDropdownMenuItem, selector: ".item" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: ConversationListComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-conversation-list', template: "<div class=\"uci-container\">\n    <div class=\"ui grid\">\n        <div class=\"ten wide column\">\n            <div class=\"sb-search-box b-0 ml-0 large\">\n                <div class=\"input-div relative\" id=\"search-input-container\">\n                    <img alt=\"Search Icon\" class=\"search icon\" src=\"assets/images/search-icon.svg\">\n                    <input class=\"sb-search-input disabled ng-untouched ng-pristine\" id=\"keyword\" name=\"filter_search\"\n                           [(ngModel)]=\"search\" type=\"text\" placeholder=\"Search\">\n                </div>\n                <button class=\"sb-btn sb-btn-normal disabled\" (click)=\"getSearch()\">Search</button>\n            </div>\n\n        </div>\n        <div class=\"two wide column\">\n            <div class=\"pb-10\">\n                <div class=\"right-floated pt-0\">\n                    <button class=\"sb-btn sb-btn-normal sb-btn-primary\" (click)=\"onAddNew()\"> Add New</button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <table class=\"ui single line upForReviewTable table\">\n        <thead>\n        <tr>\n            <th class=\"three wide UpReviewTableHeader sorted bl-0\">\n                Name\n            </th>\n            <th class=\"one wide UpReviewTableHeader sorted bl-0\">\n                Status\n            </th>\n            <th class=\"four wide UpReviewTableHeader sorted bl-0\">\n                Description\n            </th>\n            <th class=\"two wide UpReviewTableHeader sorted bl-0\">\n                Starting Message\n            </th>\n            <th class=\"one wide UpReviewTableHeader sorted bl-0\">\n                User Count\n            </th>\n            <th class=\"one wide UpReviewTableHeader sorted bl-0 center aligned\">\n                Action\n            </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr class=\"UpForReviewListHover\" *ngFor=\"let content of chatBots; let i = index;\">\n            <td>{{content.name}}</td>\n            <td [ngClass]=\"'status-' + (content.status ? content.status.toLowerCase(): '')\">{{content.status}}</td>\n            <td>{{content?.description}}</td>\n            <td>{{content.startingMessage}}</td>\n            <td class=\"center aligned\">{{content.userCount}}</td>\n            <td class=\"center aligned\">\n                <div class=\"ui dropdown\" suiDropdown>\n                    <i class=\"ellipsis vertical icon ellipsis-icon dropdown\"></i>\n                    <div class=\"menu\" suiDropdownMenu>\n                        <div class=\"item\" (click)=\"onEdit(content)\">Edit</div>\n                        <div class=\"item\" (click)=\"onDelete(content, i)\">Delete</div>\n                        <div class=\"item\" (click)=\"onStatusChange(content, i)\">{{content.status === 'Live' ? 'Disable' : 'Enable'}}</div>\n                    </div>\n                </div>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n    <div class=\"ui grid\">\n        <div class=\"two wide column\"></div>\n        <div class=\"ten wide column\">\n            <div class=\"pb-10\">\n                <div class=\"ui pagination menu mt-10 right-floated pt-0\" *ngIf=\"pager.pages\">\n                    <a [ngClass]=\"{disabled:pager.currentPage===1 }\" class=\"item \"\n                       (click)=\"navigateToPage(1) \">First</a>\n                    <a [ngClass]=\"{disabled:pager.currentPage===1 }\" class=\"item \"\n                       (click)=\"navigateToPage(pager.currentPage - 1)\">Previous</a>\n                    <a *ngFor=\"let page of pager.pages\" [ngClass]=\"{active:pager.currentPage===page}\"\n                       (click)=\"navigateToPage(page)\" class=\"item\">{{page}}</a>\n                    <a [ngClass]=\"{disabled:pager.currentPage=== pager.totalPages}\"\n                       (click)=\"navigateToPage(pager.currentPage + 1)\" class=\"item\">Next</a>\n                    <a [ngClass]=\"{disabled:pager.currentPage=== pager.totalPages}\"\n                       (click)=\"navigateToPage(pager.totalPages)\" class=\"item \">Last</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n", styles: [".ellipsis-icon{font-size:1.2rem}.status-live{color:#3c763d}.status-draft{color:#ffb300}.status-disabled{color:#ff4a2f}.action-dropdown{top:2px;left:-56px;z-index:2;position:absolute}.action-dropdown .item{cursor:pointer}.action-dropdown .item:hover{background-color:#f6f6f6}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.UciService }, { type: i2.Router }, { type: i3.GlobalService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udmVyc2F0aW9uLWxpc3QuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdWNpLWNvbnNvbGUvc3JjL2xpYi9jb21wb25lbnRzL2NvbnZlcnNhdGlvbi1saXN0L2NvbnZlcnNhdGlvbi1saXN0LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VjaS1jb25zb2xlL3NyYy9saWIvY29tcG9uZW50cy9jb252ZXJzYXRpb24tbGlzdC9jb252ZXJzYXRpb24tbGlzdC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsU0FBUyxFQUFTLE1BQU0sZUFBZSxDQUFDOzs7Ozs7OztBQVVoRCxNQUFNLE9BQU8seUJBQXlCO0lBb0JsQyxZQUNZLFVBQXNCLEVBQ3RCLE1BQWMsRUFDZCxhQUE0QjtRQUY1QixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDZCxrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQXRCeEMsYUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNkLFVBQUssR0FBUTtZQUNULFVBQVUsRUFBRSxDQUFDO1lBQ2IsV0FBVyxFQUFFLENBQUM7WUFDZCxRQUFRLEVBQUUsRUFBRTtZQUNaLFVBQVUsRUFBRSxDQUFDO1lBQ2IsU0FBUyxFQUFFLENBQUM7WUFDWixPQUFPLEVBQUUsQ0FBQztZQUNWLFVBQVUsRUFBRSxDQUFDO1lBQ2IsUUFBUSxFQUFFLENBQUM7WUFDWCxLQUFLLEVBQUUsRUFBRTtTQUNaLENBQUM7UUFDRixlQUFVLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsV0FBTSxHQUFHLEVBQUUsQ0FBQztRQUNaLGtCQUFhLEdBQUcsRUFBRSxDQUFDO1FBQ25CLFlBQU8sR0FBRyxLQUFLLENBQUM7SUFTaEIsQ0FBQztJQUVELFFBQVE7UUFDSixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FB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QyxNQUFNLEdBQUcsVUFBVSxDQUFDO1lBQzdDLENBQUMsQ0FDSixDQUFDO1NBQ0w7YUFBTTtZQUNILElBQUksQ0FBQyxVQUFVLENBQUMsaUJBQWlCLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FDeEQsSUFBSSxDQUFDLEVBQUU7Z0JBQ0gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1lBQ3pDLENBQUMsQ0FDSixDQUFDO1NBQ0w7SUFDTCxDQUFDO0lBRUQsUUFBUSxDQUFDLFlBQVksRUFBRSxLQUFLO1FBQ3hCLElBQUksQ0FBQyxVQUFVLENBQUMsa0JBQWtCLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FDekQsSUFBSSxDQUFDLEVBQUU7WUFDSCxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDbkMsQ0FBQyxDQUNKLENBQUM7SUFDTixDQUFDOytHQWhJUSx5QkFBeUI7bUdBQXpCLHlCQUF5Qiw2RENWdEMsdW5JQXFGQTs7NEZEM0VhLHlCQUF5QjtrQkFMckMsU0FBUzsrQkFDSSx1QkFBdUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCwgT25Jbml0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7VWNpU2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvdWNpLnNlcnZpY2UnO1xuaW1wb3J0IHtSb3V0ZXJ9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQge0dsb2JhbFNlcnZpY2V9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2dsb2JhbC5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdsaWItY29udmVyc2F0aW9uLWxpc3QnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9jb252ZXJzYXRpb24tbGlzdC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vY29udmVyc2F0aW9uLWxpc3QuY29tcG9uZW50LmNzcyddXG59KVxuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvbkxpc3RDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAgIGNoYXRCb3RzID0gW107XG4gICAgcGFnZXI6IGFueSA9IHtcbiAgICAgICAgdG90YWxJdGVtczogMCxcbiAgICAgICAgY3VycmVudFBhZ2U6IDEsXG4gICAgICAgIHBhZ2VTaXplOiAxMCxcbiAgICAgICAgdG90YWxQYWdlczogMCxcbiAgICAgICAgc3RhcnRQYWdlOiAwLFxuICAgICAgICBlbmRQYWdlOiAwLFxuICAgICAgICBzdGFydEluZGV4OiAwLFxuICAgICAgICBlbmRJbmRleDogMCxcbiAgICAgICAgcGFnZXM6IFtdXG4gICAgfTtcbiAgICBwYWdlTnVtYmVyID0gMTtcbiAgICBjb2x1bW4gPSAnJztcbiAgICBzb3J0RGlyZWN0aW9uID0gJyc7XG4gICAgcmV2ZXJzZSA9IGZhbHNlO1xuICAgIHF1ZXJ5UGFyYW1zOiBhbnk7XG4gICAgc2VhcmNoO1xuICAgIHVzZXI7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgdWNpU2VydmljZTogVWNpU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcbiAgICAgICAgcHJpdmF0ZSBnbG9iYWxTZXJ2aWNlOiBHbG9iYWxTZXJ2aWNlLFxuICAgICkge1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnVzZXIgPSB0aGlzLmdsb2JhbFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICBpZiAoIXRoaXMudXNlcikge1xuICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWyd1Y2ktYWRtaW4nXSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nZXRBbGxDaGF0Qm90cygpO1xuICAgIH1cblxuICAgIGdldEFsbENoYXRCb3RzKCkge1xuICAgICAgICBjb25zdCBwYXJhbTogYW55ID0ge1xuICAgICAgICAgICAgcGFnZTogdGhpcy5wYWdlci5jdXJyZW50UGFnZSxcbiAgICAgICAgICAgIHBlclBhZ2U6IHRoaXMucGFnZXIucGFnZVNpemVcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodGhpcy5zZWFyY2gpIHtcbiAgICAgICAgICAgIHBhcmFtLm5hbWUgPSB0aGlzLnNlYXJjaDtcbiAgICAgICAgICAgIHRoaXMudWNpU2VydmljZS5zZWFyY2hDb252ZXJzYXRpb24ocGFyYW0pLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICBkYXRhID0+IHRoaXMucGFyc2VDb252ZXJzYXRpb25zKGRhdGEpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51Y2lTZXJ2aWNlLmZldGNoQ29udmVyc2F0aW9uKHBhcmFtKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgZGF0YSA9PiB0aGlzLnBhcnNlQ29udmVyc2F0aW9ucyhkYXRhKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgcGFyc2VDb252ZXJzYXRpb25zKGRhdGEpIHtcbiAgICAgICAgdGhpcy5jaGF0Qm90cyA9IFtdO1xuICAgICAgICBkYXRhLmRhdGEuZm9yRWFjaChib3QgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2JqID0gey4uLmJvdCwgc2VnbWVudFRleHQ6ICcnLCB1c2VyQ291bnQ6IDAsIHN0YXR1czogYm90LnN0YXR1cyB8fCAnRHJhZnQnfTtcbiAgICAgICAgICAgIG9iai5zdGF0dXMgPSBib3Quc3RhdHVzID09PSAnZW5hYmxlZCcgPyAnTGl2ZScgOiBib3Quc3RhdHVzID09PSAnZGlzYWJsZWQnID8gJ0Rpc2FibGVkJyA6ICdEcmFmdCc7XG4gICAgICAgICAgICBjb25zdCBzZWdtZW50TmFtZXMgPSBbXTtcbiAgICAgICAgICAgIGJvdC51c2VyU2VnbWVudHMuZm9yRWFjaCh1c2VyU2VnbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgc2VnbWVudE5hbWVzLnB1c2godXNlclNlZ21lbnQubmFtZSk7XG4gICAgICAgICAgICAgICAgb2JqLnVzZXJDb3VudCArPSAodXNlclNlZ21lbnQuY291bnQgfHwgMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG9iai5zZWdtZW50VGV4dCA9IHNlZ21lbnROYW1lcy5qb2luKCcsICcpO1xuXG4gICAgICAgICAgICB0aGlzLmNoYXRCb3RzLnB1c2gob2JqKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGFnZXIudG90YWxJdGVtcyA9IGRhdGEudG90YWw7XG4gICAgICAgIHRoaXMucGFnZXIudG90YWxQYWdlcyA9IE1hdGguY2VpbChkYXRhLnRvdGFsIC8gdGhpcy5wYWdlci5wYWdlU2l6ZSk7XG4gICAgICAgIHRoaXMucGFnZXIucGFnZXMgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICB3aGlsZSAoaSA8PSBNYXRoLmNlaWwoZGF0YS50b3RhbCAvIHRoaXMucGFnZXIucGFnZVNpemUpKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VyLnBhZ2VzLnB1c2goaSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzb3J0Q29sdW1ucyhjb2x1bW4pIHtcbiAgICAgICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47XG4gICAgICAgIHRoaXMuc29ydERpcmVjdGlvbiA9IHRoaXMuc29ydERpcmVjdGlvbiA9PT0gJ2FzYycgPyAnZGVzYycgOiAnYXNjJztcbiAgICAgICAgdGhpcy5yZXZlcnNlID0gIXRoaXMucmV2ZXJzZTtcbiAgICB9XG5cbiAgICBuYXZpZ2F0ZVRvUGFnZShwYWdlOiBudW1iZXIpOiB1bmRlZmluZWQgfCB2b2lkIHtcbiAgICAgICAgaWYgKHBhZ2UgPCAxIHx8IHBhZ2UgPiB0aGlzLnBhZ2VyLnRvdGFsUGFnZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhZ2VOdW1iZXIgPSBwYWdlO1xuICAgICAgICB0aGlzLnBhZ2VyLmN1cnJlbnRQYWdlID0gcGFnZTtcbiAgICAgICAgdGhpcy5nZXRBbGxDaGF0Qm90cygpO1xuICAgIH1cblxuICAgIGdldFNlYXJjaCgpIHtcbiAgICAgICAgdGhpcy5nZXRBbGxDaGF0Qm90cygpO1xuICAgIH1cblxuICAgIG9uQWRkTmV3KCkge1xuICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZUJ5VXJsKCd1Y2ktYWRtaW4vYWRkJyk7XG4gICAgfVxuXG4gICAgb25FZGl0KGNvbnZlcnNhdGlvbikge1xuICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZUJ5VXJsKGB1Y2ktYWRtaW4vJHtjb252ZXJzYXRpb24uaWR9L2VkaXRgKTtcbiAgICB9XG5cbiAgICBvblN0YXR1c0NoYW5nZShjb252ZXJzYXRpb24sIGluZGV4KSB7XG4gICAgICAgIGlmIChjb252ZXJzYXRpb24uc3RhdHVzID09PSAnTGl2ZScpIHtcbiAgICAgICAgICAgIHRoaXMudWNpU2VydmljZS5wYXVzZUNvbnZlcnNhdGlvbihjb252ZXJzYXRpb24uaWQpLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICBkYXRhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGF0Qm90c1tpbmRleF0uc3RhdHVzID0gJ0Rpc2FibGVkJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51Y2lTZXJ2aWNlLnN0YXJ0Q29udmVyc2F0aW9uKGNvbnZlcnNhdGlvbi5pZCkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgIGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXRCb3RzW2luZGV4XS5zdGF0dXMgPSAnTGl2ZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uRGVsZXRlKGNvbnZlcnNhdGlvbiwgaW5kZXgpIHtcbiAgICAgICAgdGhpcy51Y2lTZXJ2aWNlLmRlbGV0ZUNvbnZlcnNhdGlvbihjb252ZXJzYXRpb24uaWQpLnN1YnNjcmliZShcbiAgICAgICAgICAgIGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhdEJvdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cblxufVxuIiwiPGRpdiBjbGFzcz1cInVjaS1jb250YWluZXJcIj5cbiAgICA8ZGl2IGNsYXNzPVwidWkgZ3JpZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGVuIHdpZGUgY29sdW1uXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2Itc2VhcmNoLWJveCBiLTAgbWwtMCBsYXJnZVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1kaXYgcmVsYXRpdmVcIiBpZD1cInNlYXJjaC1pbnB1dC1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBhbHQ9XCJTZWFyY2ggSWNvblwiIGNsYXNzPVwic2VhcmNoIGljb25cIiBzcmM9XCJhc3NldHMvaW1hZ2VzL3NlYXJjaC1pY29uLnN2Z1wiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJzYi1zZWFyY2gtaW5wdXQgZGlzYWJsZWQgbmctdW50b3VjaGVkIG5nLXByaXN0aW5lXCIgaWQ9XCJrZXl3b3JkXCIgbmFtZT1cImZpbHRlcl9zZWFyY2hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgWyhuZ01vZGVsKV09XCJzZWFyY2hcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoXCI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInNiLWJ0biBzYi1idG4tbm9ybWFsIGRpc2FibGVkXCIgKGNsaWNrKT1cImdldFNlYXJjaCgpXCI+U2VhcmNoPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInR3byB3aWRlIGNvbHVtblwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBiLTEwXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJpZ2h0LWZsb2F0ZWQgcHQtMFwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwic2ItYnRuIHNiLWJ0bi1ub3JtYWwgc2ItYnRuLXByaW1hcnlcIiAoY2xpY2spPVwib25BZGROZXcoKVwiPiBBZGQgTmV3PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8dGFibGUgY2xhc3M9XCJ1aSBzaW5nbGUgbGluZSB1cEZvclJldmlld1RhYmxlIHRhYmxlXCI+XG4gICAgICAgIDx0aGVhZD5cbiAgICAgICAgPHRyPlxuICAgICAgICAgICAgPHRoIGNsYXNzPVwidGhyZWUgd2lkZSBVcFJldmlld1RhYmxlSGVhZGVyIHNvcnRlZCBibC0wXCI+XG4gICAgICAgICAgICAgICAgTmFtZVxuICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgIDx0aCBjbGFzcz1cIm9uZSB3aWRlIFVwUmV2aWV3VGFibGVIZWFkZXIgc29ydGVkIGJsLTBcIj5cbiAgICAgICAgICAgICAgICBTdGF0dXNcbiAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3M9XCJmb3VyIHdpZGUgVXBSZXZpZXdUYWJsZUhlYWRlciBzb3J0ZWQgYmwtMFwiPlxuICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uXG4gICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzPVwidHdvIHdpZGUgVXBSZXZpZXdUYWJsZUhlYWRlciBzb3J0ZWQgYmwtMFwiPlxuICAgICAgICAgICAgICAgIFN0YXJ0aW5nIE1lc3NhZ2VcbiAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3M9XCJvbmUgd2lkZSBVcFJldmlld1RhYmxlSGVhZGVyIHNvcnRlZCBibC0wXCI+XG4gICAgICAgICAgICAgICAgVXNlciBDb3VudFxuICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgIDx0aCBjbGFzcz1cIm9uZSB3aWRlIFVwUmV2aWV3VGFibGVIZWFkZXIgc29ydGVkIGJsLTAgY2VudGVyIGFsaWduZWRcIj5cbiAgICAgICAgICAgICAgICBBY3Rpb25cbiAgICAgICAgICAgIDwvdGg+XG4gICAgICAgIDwvdHI+XG4gICAgICAgIDwvdGhlYWQ+XG4gICAgICAgIDx0Ym9keT5cbiAgICAgICAgPHRyIGNsYXNzPVwiVXBGb3JSZXZpZXdMaXN0SG92ZXJcIiAqbmdGb3I9XCJsZXQgY29udGVudCBvZiBjaGF0Qm90czsgbGV0IGkgPSBpbmRleDtcIj5cbiAgICAgICAgICAgIDx0ZD57e2NvbnRlbnQubmFtZX19PC90ZD5cbiAgICAgICAgICAgIDx0ZCBbbmdDbGFzc109XCInc3RhdHVzLScgKyAoY29udGVudC5zdGF0dXMgPyBjb250ZW50LnN0YXR1cy50b0xvd2VyQ2FzZSgpOiAnJylcIj57e2NvbnRlbnQuc3RhdHVzfX08L3RkPlxuICAgICAgICAgICAgPHRkPnt7Y29udGVudD8uZGVzY3JpcHRpb259fTwvdGQ+XG4gICAgICAgICAgICA8dGQ+e3tjb250ZW50LnN0YXJ0aW5nTWVzc2FnZX19PC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cImNlbnRlciBhbGlnbmVkXCI+e3tjb250ZW50LnVzZXJDb3VudH19PC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cImNlbnRlciBhbGlnbmVkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVpIGRyb3Bkb3duXCIgc3VpRHJvcGRvd24+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZWxsaXBzaXMgdmVydGljYWwgaWNvbiBlbGxpcHNpcy1pY29uIGRyb3Bkb3duXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWVudVwiIHN1aURyb3Bkb3duTWVudT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtXCIgKGNsaWNrKT1cIm9uRWRpdChjb250ZW50KVwiPkVkaXQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtXCIgKGNsaWNrKT1cIm9uRGVsZXRlKGNvbnRlbnQsIGkpXCI+RGVsZXRlPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXRlbVwiIChjbGljayk9XCJvblN0YXR1c0NoYW5nZShjb250ZW50LCBpKVwiPnt7Y29udGVudC5zdGF0dXMgPT09ICdMaXZlJyA/ICdEaXNhYmxlJyA6ICdFbmFibGUnfX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgICA8L3Rib2R5PlxuICAgIDwvdGFibGU+XG4gICAgPGRpdiBjbGFzcz1cInVpIGdyaWRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInR3byB3aWRlIGNvbHVtblwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGVuIHdpZGUgY29sdW1uXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGItMTBcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidWkgcGFnaW5hdGlvbiBtZW51IG10LTEwIHJpZ2h0LWZsb2F0ZWQgcHQtMFwiICpuZ0lmPVwicGFnZXIucGFnZXNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGEgW25nQ2xhc3NdPVwie2Rpc2FibGVkOnBhZ2VyLmN1cnJlbnRQYWdlPT09MSB9XCIgY2xhc3M9XCJpdGVtIFwiXG4gICAgICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJuYXZpZ2F0ZVRvUGFnZSgxKSBcIj5GaXJzdDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPGEgW25nQ2xhc3NdPVwie2Rpc2FibGVkOnBhZ2VyLmN1cnJlbnRQYWdlPT09MSB9XCIgY2xhc3M9XCJpdGVtIFwiXG4gICAgICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJuYXZpZ2F0ZVRvUGFnZShwYWdlci5jdXJyZW50UGFnZSAtIDEpXCI+UHJldmlvdXM8L2E+XG4gICAgICAgICAgICAgICAgICAgIDxhICpuZ0Zvcj1cImxldCBwYWdlIG9mIHBhZ2VyLnBhZ2VzXCIgW25nQ2xhc3NdPVwie2FjdGl2ZTpwYWdlci5jdXJyZW50UGFnZT09PXBhZ2V9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgKGNsaWNrKT1cIm5hdmlnYXRlVG9QYWdlKHBhZ2UpXCIgY2xhc3M9XCJpdGVtXCI+e3twYWdlfX08L2E+XG4gICAgICAgICAgICAgICAgICAgIDxhIFtuZ0NsYXNzXT1cIntkaXNhYmxlZDpwYWdlci5jdXJyZW50UGFnZT09PSBwYWdlci50b3RhbFBhZ2VzfVwiXG4gICAgICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJuYXZpZ2F0ZVRvUGFnZShwYWdlci5jdXJyZW50UGFnZSArIDEpXCIgY2xhc3M9XCJpdGVtXCI+TmV4dDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPGEgW25nQ2xhc3NdPVwie2Rpc2FibGVkOnBhZ2VyLmN1cnJlbnRQYWdlPT09IHBhZ2VyLnRvdGFsUGFnZXN9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgKGNsaWNrKT1cIm5hdmlnYXRlVG9QYWdlKHBhZ2VyLnRvdGFsUGFnZXMpXCIgY2xhc3M9XCJpdGVtIFwiPkxhc3Q8L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG48L2Rpdj5cbiJdfQ==